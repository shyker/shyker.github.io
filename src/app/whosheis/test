import fs from "fs";
import path from "path";
import matter from "gray-matter";
import ReactMarkdown from "react-markdown";
import Link from "next/link";
import { WhoAmI } from "@/components/magicui/whoami";
import { PosterModule } from "@/components/magicui/PosterModule";
import BrokenRecord from "@/components/magicui/broken-record";

export default async function AboutPage() {
  const filePath = path.join(process.cwd(), "src", "posts", "thefirst.md");
  
  if (!fs.existsSync(filePath)) {
    return (
      <main className="min-h-screen bg-[#0005a7] text-white p-10">
        <div className="max-w-3xl mx-auto">
          <Link href="/" className="text-white/50 hover:text-white mb-4 inline-block">â† è¿”å›</Link>
          <h1 className="text-2xl font-bold">æ–‡ä»¶æœªæ‰¾åˆ°</h1>
          <p className="mt-4 opacity-60">è¯·æ£€æŸ¥è·¯å¾„: {filePath}</p>
        </div>
      </main>
    );
  }

  const fileContent = fs.readFileSync(filePath, "utf8");
  const { data, content } = matter(fileContent);

  // ğŸš€ ã€åæ ‡ä¸å°ºå¯¸è°ƒèŠ‚å˜é‡ã€‘
  const renderPos = {
    x: "20%",      // æ°´å¹³ä½ç½®ï¼šè·ç¦»å·¦ä¾§ 12%
    y: "20%",      // ğŸ”¥ å‚ç›´ä½ç½®ï¼šè·ç¦»é¡¶éƒ¨ 15% (ä½ å¯ä»¥æ ¹æ®éœ€è¦æ”¹ä¸º 10% æˆ– 20%)
    width: "900px" // æ–‡ç« çš„æœ€å¤§å®½åº¦
  };

  return (
    <main className="relative min-h-screen bg-[#f381f1] text-white overflow-x-hidden">

      {/* --- A. æ–‡ç« æ¸²æŸ“ä¸»ä½“ --- */}
      <div 
        className="absolute z-10 pb-40 px-6" 
        style={{ 
          left: renderPos.x, 
          top: renderPos.y,   // ğŸ”¥ ä½¿ç”¨ y å˜é‡æ§åˆ¶ä¸Šä¸‹é—´è·
          width: '100%',
          maxWidth: renderPos.width 
        }}
      >

         <PosterModule
                x={50} y={120} 
                width={200} height={200} 
                rotate={30}
                image="/image/yyyyyy/deco1.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1340} y={-0} 
                width={200} height={200} 
                rotate={-30}
                image="/image/yyyyyy/deco2.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
         <PosterModule
                x={150} y={20} 
                width={200} height={200} 
                rotate={0}
                image="/image/yyyyyy/deco3.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={450} y={620} 
                width={180} height={180} 
                rotate={0}
                image="/image/yyyyyy/deco4.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={290} y={640} 
                width={200} height={200} 
                rotate={0}
                image="/image/yyyyyy/deco5.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1230} y={490} 
                width={300} height={300} 
                rotate={0}
                image="/image/yyyyyy/deco6.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={650} y={-30} 
                width={250} height={250} 
                rotate={6}
                image="/image/yyyyyy/deco7.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={970} y={-0} 
                width={150} height={150} 
                rotate={-6}
                image="/image/yyyyyy/deco8.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1130} y={250} 
                width={350} height={350} 
                rotate={-6}
                image="/image/yyyyyy/deco9.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={350} y={0} 
                width={250} height={250} 
                rotate={0}
                image="/image/yyyyyy/deco10.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1150} y={650} 
                width={180} height={180} 
                rotate={0}
                image="/image/yyyyyy/deco11.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1350} y={400} 
                // zIndex={}
                width={200} height={200} 
                rotate={0}
                image="/image/yyyyyy/deco12.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={0} y={0} 
                // zIndex={}
                width={200} height={200} 
                rotate={0}
                image="/image/yyyyyy/deco13.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1200} y={100} 
                // zIndex={}
                width={200} height={200} 
                rotate={-10}
                image="/image/deco/deco21.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={1220} y={450} 
                // zIndex={}
                width={150} height={150} 
                rotate={-10}
                image="/image/deco/deco20-1.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={10} y={680} 
                // zIndex={}
                width={180} height={180} 
                rotate={10}
                image="/image/deco/deco24.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />
          <PosterModule
                x={700} y={150} 
                // zIndex={}
                width={120} height={120} 
                rotate={30}
                image="/image/deco/deco25.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          />   
          <PosterModule
                x={70} y={300} 
                // zIndex={}
                width={120} height={120} 
                rotate={0}
                image="/image/deco/deco19-1.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={1050} y={690} 
                // zIndex={}
                width={150} height={150} 
                rotate={30}
                image="/image/deco/deco10.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={1400} y={690} 
                // zIndex={}
                width={150} height={150} 
                rotate={0}
                image="/image/deco/deco18-1.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={550} y={20} 
                // zIndex={}
                width={150} height={150} 
                rotate={0}
                image="/image/deco/deco33.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={850} y={20} 
                // zIndex={}
                width={150} height={150} 
                rotate={0}
                image="/image/deco/deco32.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={1250} y={40} 
                // zIndex={}
                width={100} height={100} 
                rotate={0}
                image="/image/deco/deco30.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 
          <PosterModule
                x={250} y={300} 
                // zIndex={}
                width={180} height={180} 
                rotate={0}
                image="/image/deco/deco29.png" 
                hazy={false}         //å…³é—­æœ¦èƒ§ï¼Œå±•ç¤ºåŸå›¾
                isTransparent={true}   // ğŸ”¥ å¼€å¯ç‰¹æ®Šå¤„ç†ï¼šæ— è¾¹æ¡†ã€æ— é˜´å½±ã€æ— æ¸å˜
                // title="DX3906"
          /> 

        {/* Markdown æ­£æ–‡ï¼šå·²åˆ é™¤æ•´ä¸ª Header éƒ¨åˆ† */}
        <article className="prose prose-invert prose-blue lg:prose-xl max-w-none 
          prose-headings:italic prose-headings:tracking-tighter
          prose-p:text-white/80 prose-p:leading-relaxed
          prose-strong:text-orange-400">
          <ReactMarkdown>{content}</ReactMarkdown>
        </article>
      </div>

      
      {/* è§’è‰²ç»„ä»¶ */}
      <WhoAmI 
        x={-50}
        y={350} 
        width={500} 
        height={500} 
        image="/image/weusour/whoami2.png"
        isTransparent={true}
        pageId="about"
      />

      {/* å³ä¾§æ©™è‰²æ°›å›´å…‰çƒ */}
      <div className="fixed top-[40%] right-[-10%] w-[700px] h-[600px] bg-orange-500/35 blur-[120px] rounded-full pointer-events-none z-0" />
      
      {/* å…¨å±æ©™è‰²æ··åˆæ»¤é•œ */}
      <div className="fixed inset-0 bg-orange-500/7 mix-blend-overlay pointer-events-none z-20" />

    </main>
  );
}