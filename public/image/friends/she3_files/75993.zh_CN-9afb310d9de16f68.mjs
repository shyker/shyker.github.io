(self.modernJsonp=self.modernJsonp||[]).push([["75993"],{15176(e,t,a){a.d(t,{A:()=>b});var n=a(657140),i=a(278461),r=a(221718),o=a(360447),s=a(385279),l=a(107639),d=a(536059),c=a(528989),u=a(424120),_=a(60341),p=a(27112),h=a(41366),m=a(218781),g=a(491149),f=a(282395);function b({pageUniqueKey:e,containerPage:t}){let a=(0,s.C)(),b=(0,g.qJ)(),w=(0,i.zy)(),{checkExperiment:y}=(0,c.A)(),{isPaid:A,isSocial:v,isDirect:x,isSEO:I}=(0,d.A)(),j=(0,f.ik)(),S=j?.data?.inviter,P=(0,_.V2)(),z=(0,u.y1)(),E=JSON.parse(P.getItem(o.$y)??"[]"),T=b&&y("dweb_navigational_on_land").anyEnabled,C=b&&"enabled_paid"===y("dweb_navigational_on_land").group,B=b&&"enabled_social"===y("dweb_navigational_on_land").group,R=b&&"enabled_seo_direct"===y("dweb_navigational_on_land").group,k=b&&(y("migration_upsell_manager_redux").anyEnabled||y("migration_upsell_manager_redux_dweb").anyEnabled||y("migration_upsell_manager_redux_dweb_global").anyEnabled),N=(0,p.A)(),M=b&&a&&!P.getItem(o.RR)&&E.length+1>=0&&!E.includes(e)&&v&&(0,l.mg)(w),O=b&&"31"===(0,m.A)(w?.search).utm_source&&(0,l.iK)(w)&&y("dweb_email_referred_board_page_upsell_experiment").anyEnabled;(0,n.useEffect)(()=>{if(k)N((0,h.op)(e,t));else if(a&&!P.getItem(o.RR)){let n=C&&A||B&&v||R&&(x||I)||O;(E.length+1>=4||n&&E.length+1>=0)&&!E.includes(e)?(a.showDesktopSignupModal({signupFlow:{type:"login"},attributionLabel:`navigation_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP",isWashBlocking:!!O}),P.setItem(o.RR,"true"),P.removeItem(o.$y),z.setItem(r.jB,0)):M||P.setItem(o.$y,JSON.stringify([...new Set([...E,e])]))}},[e,t,4,a,P,z,N,k,T,x,I,A,v,C,B,R,E,O,M,y]),(0,n.useEffect)(()=>{if(!M||!S)return;k&&N((0,h.cM)(S,t));let e=[];if(y("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled)if(k)N((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}else if(y("ce_dweb_unauth_splp_blocking_3s").anyEnabled){let n=setTimeout(()=>{if(k)N((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}},3e3);e.push(n)}else if(y("ce_dweb_unauth_splp_blocking").anyEnabled){let n=setTimeout(()=>{if(k)N((0,h.is)(t));else{let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`delay_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}},6e3);e.push(n)}return()=>{e.forEach(e=>clearTimeout(e))}},[S,M,k,N,t]),(0,n.useEffect)(()=>{if(!M||!S)return;let e=!1,n=()=>{e||(requestAnimationFrame(()=>{(()=>{let{scrollY:e}=window;if(e>1){if(k)N((0,h.Y0)(t));else if(y("ce_dweb_unauth_splp_blocking").anyEnabled||y("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled||y("ce_dweb_unauth_splp_blocking_3s").anyEnabled){let{showDesktopSignupModal:e}=a;e({signupFlow:{type:"signup"},attributionLabel:`scroll_${t}`,container:t,reason:"UPSELL_LOGIN_OR_SIGNUP"}),P.setItem(o.RR,"true")}}})(),e=!1}),e=!0)};return window.addEventListener("scroll",n,{passive:!0}),()=>{window.removeEventListener("scroll",n)}},[S,M,k,N,t])}},838917(e,t,a){a.d(t,{K:()=>m,z:()=>r});var n=a(321571),i=a(892804);let r="nic_v4",o=`${r}=1a`,s=`${r}=1b`,l=[o,s],d=["invite_code","invite","board_invite_code","sender"],c=null,u=e=>!!d.find(t=>e.includes(t)),_=e=>{let t;return e.pathname.includes("/pin/")&&!u(e.search)&&(t=e.search,!l.find(e=>t.includes(e)))},p=async e=>{let{resource_response:t}=await n.A.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();if(!t)return(0,i.GV)(`${r}.social_tracking_pin_non_invite.no_resource_response`),"";{let e=encodeURIComponent(t.data);return(0,i.GV)(`${r}.social_tracking_pin_non_invite.encrypted.${e?"true":"false"}`),e}},h=(e,t,a=!1,n)=>{if(!_(e))return;let l=a?"mweb":"web";if(!t)return void(0,i.GV)(`${l}.${r}.social_tracking_pin_non_invite.insert.no_encrypted_id`);(0,i.GV)(`${l}.${r}.social_tracking_pin_non_invite.insert.attempt`);try{var d;let c,u=(d=a||!1,c=e.search?"&":"?",e.pathname+e.search+(c+(d?s:o)+t));(0,i.GV)(`${l}.${r}.social_tracking_pin_non_invite.insert.success`),n(u)}catch{(0,i.GV)(`${l}.${r}.social_tracking_pin_non_invite.insert.caught_exception`)}},m=(e,t,a,n,o)=>{let s=a?"mweb":"web";(0,i.GV)(`${s}.${r}.social_tracking_pin_non_invite.attempt`);try{let l;!a&&n&&_(e)?((0,i.GV)(`${s}.${r}.social_tracking_pin_non_invite.search_string_eligible`),((e,t,a=!1,n)=>{c?h(e,c,a,n):(async()=>{let i=await p(t);c=i,h(e,i,a,n)})()})(e,t,a,o)):(l=e.search,!u(l)&&!l.includes("sender")&&l.includes(r)&&(0,i.GV)(`${s}.${r}.social_tracking_pin_non_invite.search_string_land`))}catch{(0,i.GV)(`${s}.${r}.social_tracking_pin_non_invite.caught_exception`)}}},536059(e,t,a){a.d(t,{A:()=>u});var n=a(278461),i=a(838917),r=a(107639),o=a(376195),s=a(672804),l=a(272090),d=a(507120),c=a(892804);function u(){let e,{isBot:t,isSocialBot:a,referrerFromCookie:u,referrerFromHeader:_,countryFromHostName:p,countryFromIp:h,regionFromIp:m,isAuthenticated:g}=(0,o._8)(),f=(0,n.zy)(),b=(0,d.A)(),w=new URLSearchParams(f.search),y=!t&&!!w.get("utm_pai"),A=w.get("utm_source"),v=!t&&!a&&(0,r.ZX)(f),x=(0,l.A)({countryFromHostName:p||"",countryFromIp:h||"",regionFromIp:m||"",isAuthenticated:g}),I=_||x&&u||"";e=b||!x?I:(0,s.G2)(I);let j=!1,S=!t&&!a&&A&&["email",String(31)].includes(A),P=!t&&!a&&A&&["fb"].includes(A),z="offsite"===A,E=!t&&!a&&!!(e&&(/facebook/.test(e)||/fb/.test(e))),T=!t&&!a&&!!(e&&(/twitter/.test(e)||/tw/.test(e)));v&&(0,c.GV)("unauth.entry_channel.invite_code",{sampleRate:1}),S&&(0,c.GV)("unauth.entry_channel.email_utm_source",{sampleRate:1}),P&&(0,c.GV)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),z&&(0,c.GV)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),E&&(0,c.GV)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),T&&(0,c.GV)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),j=(0,s.Eb)(e);let C=!t&&j,B=!!w.get(i.z),R=!!w.get("twa_type")||e&&e.startsWith("android-app://com.pinterest.twa"),k=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(e=>null!==w.get(e))||!!e||B||R;return{isPaid:y,isInvite:v,utmSource:A,referrer:e,isSocial:v,isDirect:!t&&!y&&!v&&!C&&!k,isSEO:C,isBrowserStorageAllowed:x,isOffsite:z,isBot:t||a}}},244408(e,t,a){a.d(t,{A:()=>n});let n=(0,a(657140).createContext)(null)},495618(e,t,a){a.d(t,{A:()=>n});let n=(0,a(657140).createContext)(null)},100564(e,t,a){a.d(t,{A:()=>R});var n=a(335831),i=a(657140),r=a(515289),o=a(103935),s=a(532259),l=a(594555),d=a(589914),c=a(276013),u=a(251954),_=a(850855),p=a(899738),h=a(931464),m=a(321651),g=a(132460),f=a(570927),b=a(75975),w=a(327336),y=a(711076),A=a(376195),v=a(905686),x=a(892804),I=a(135656);let j=["initial_app_load","client_route_push"],S=(0,s.lo)("PwtSurface"),P="NavigationComplete",z="VisuallyComplete",E=()=>{(0,u.Kz)()},T=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let t=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return((e,t)=>{let{metricConfig:{metricId:a,pwtStaticContext:n,annotateExperiments:i},annotations:r,binaryAnnotations:s,constraintMap:d,startTime:_,imageTimings:p,spans:h,traceId:g}=e;(0,w.A)(`Report_PWT_Complete_${(0,o.u5)(a)}`,_,t);let f=(0,c.I)({annotateExperiments:[...i??[]],annotations:r,binaryAnnotations:s,constraintMap:d,endTime:t,imageTimings:p,metricId:a,pwtMeasures:(0,y.vs)(),pwtStaticContext:n,startTime:_,traceId:g,spans:h});try{var b;let e;b=String(f.binaryAnnotationMap["metricId.surface"].value),e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let a=t.name.replace(".jpg","").split("/");return{[a[a.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{}),[...Array.from(document.getElementsByTagName("img")).map(t=>{let a=t.src.replace(".jpg","").split("/"),n=a[a.length-1];if(e[n]){let a=(0,m.d2)(t)?.width||1,i=parseInt(e[n].downloadSize??"0",10);return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let a=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),n=a[a.length-1];if(e[n]&&t instanceof HTMLDivElement){let a=(0,m.d2)(t)?.width||1,i=parseInt(e[n].downloadSize??"0",10);return{fileName:n,renderedSize:a,downloadedSize:i,ratio:i/a}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:t,fileName:a,downloadedSize:n}=e;e.ratio>1.05&&(0,l.DM)(`checkImageRatio.${b}`,{count:Math.round(10*t)/10,tags:{fileName:`${n}_${a}`}})})}catch(e){(0,l.vV)("image_ratio_check_error",{error:e})}return(0,u.Kz)(),{...e,result:f,status:"DONE"}})(e,t)}return S(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},C=(e,t)=>{let{constraint:a,time:n}=t,i=(0,o.u5)(e.metricConfig.metricId);return f.A?e.metricConfig.constraints.find(e=>e===a)?e.constraintMap[a]?(S(`constraint "${a}" is already complete.`),(0,l.vV)("duplicated_constraint_complete",{constraint:a,action:i}),e):(S(`marking constraint "${a}" as complete ${n||performance.now()}`),n?(0,b.A)(`constraint_${a}_is_complete`,n):(0,b.A)(`constraint_${a}_is_complete`),T({...e,constraintMap:{...e.constraintMap,[a]:n||f.A.now()}})):(S(`marked constraint "${a}" is not a required constraint.`),e):((0,l.vV)("missing_window_performance",{action:i}),e)},B=new Set;function R({children:e,...t}){let a,s;(0,i.useEffect)(()=>{(0,n.A)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx")},[]);let c=(0,p.A)(),m=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(c),b=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],w=[...t.annotateExperiments??[],...b],{context:y}=(({surface:e,constraints:t,segment:a,measureGridVisuallyComplete:n,annotateExperiments:s,customEnabledNavigationTypes:d,navigationInfo:{clientNavigation:c,navigationType:p},sampleRate:m})=>{var b;let w,y=(0,i.useRef)("NOT_SET"),I=(0,h.A)(),{getState:R,dispatch:k}=(b={status:"DISABLED",metricConfig:null},w=(0,i.useRef)(b),{getState:()=>w.current,dispatch:e=>{w.current=((e,t)=>{if(S("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:a,startTime:n,isSampled:i,disablePWTLogging:r}=t;if(r||"TIMING"!==e.status||n===e.startTime||E(),!a)return{status:"DISABLED",metricConfig:null};let s=(0,o.u5)(a.metricId);if("TIMING"===e.status&&e.startTime===n&&e.constraintMap[P])return(0,l.vV)("duplicated_init_route_action",{action:s}),e;if(!r){let e=(0,v.q)();(0,l.DM)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==a.metricId.isAuthenticated&&{tags:{isAuth:a.metricId.isAuthenticated}}||void 0;"Other"===a.pwtStaticContext.browserName&&!1===a.metricId.isAuthenticated&&"initial_app_load"===a.metricId.navigationType?((0,l.DM)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,l.DM)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,l.DM)(`TIMING.${s}`),(0,l.DM)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,_.S)({resultLog:`TIMING.${s}`,annotateExperiments:a.annotateExperiments||[],getExperimentGroup:a.pwtStaticContext.getExperimentGroup,options:t})}return C({traceId:(0,u.lo)()||(0,u.Ay)("initial_app_load"===a.metricId.navigationType,a.pwtStaticContext.getServerData()?.trace_id),status:"TIMING",metricConfig:a,startTime:n,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:P,disablePWTLogging:r})})(e,t.payload);if("TIMING"!==e.status)return S(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":E();let a={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:a};case"ANNOTATE":let{name:n}=t.payload;if(!f.A)return e;let i=f.A.now();return S(`adding annotation {${n}: ${i}}`),{...e,annotations:{...e.annotations,...{[n]:i}}};case"BINARY_ANNOTATE":let{name:r,value:s,annotationType:d}=t.payload;return S(`adding binary annotation {${r}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[r]:{value:s,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return C(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!f.A){let t=(0,o.u5)(e.metricConfig.metricId);(0,l.vV)("missing_window_performance",{action:t})}S(`removing constraint "${t}"`);let a=e.metricConfig.constraints.filter(e=>e!==t),{[t]:n,...i}=e.constraintMap;return T({...e,constraintMap:i,metricConfig:{...e.metricConfig,constraints:a}})})(e,t.payload);case"SET_SEGMENT":var c=t.payload;if(!f.A){let t=(0,o.u5)(e.metricConfig.metricId);(0,l.vV)("missing_window_performance",{action:t})}S(`updating pwt segment to "${c}"`);let p={...e.metricConfig.metricId,segment:c};return{...e,metricConfig:{...e.metricConfig,metricId:p}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:a}}=t;if(0===a.length)return E(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let n=Math.max(...a.map(e=>e.responseEnd||0));return C({...e,imageTimings:a},{constraint:z,time:n})}case"ADD_SUBSPAN":let{startTime:h}=e,{payload:{name:m,startTime:b,endTime:w,annotations:y,binaryAnnotations:A,parentId:x}}=t;return{...e,spans:[...e.spans,{name:m,id:(0,g.A)(),startTime:b||h,endTime:w,annotationMap:{...y},binaryAnnotationMap:{...A},parentId:x}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,g.A)(),startTime:f.A?f.A.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let I=e.spans.findIndex(e=>e.name===t.payload.name);return I>-1?(e.spans[I].endTime=f.A?f.A.now():0,t.payload.annotations&&(e.spans[I].annotationMap={...e.spans[I].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[I].binaryAnnotationMap={...e.spans[I].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,l.vV)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let j=(0,o.u5)(e.metricConfig.metricId);return(0,l.vV)("invalid_pwt_surface_action",{action:j}),e}})(w.current,e)}}),N=(0,A._8)();if(y.current!==c&&(y.current=c,I)){let{isAuthenticated:i}=I,r=e&&p&&(d||j).includes(p)?{metricId:{type:"surface",surface:e,navigationType:p,isAuthenticated:i,segment:a},annotateExperiments:s,constraints:[P,...t||[],...n?[z]:[]],pwtStaticContext:I}:null;(0,x.GV)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:p,isAuthenticated:i}});let o=!B.has(c);k({type:"INIT_ROUTE",payload:{metricConfig:r,startTime:c?c.time:0,isSampled:!m||Math.random()<m,disablePWTLogging:!o}}),o&&B.add(c)}let M=R();if((0,i.useEffect)(()=>()=>{B.delete(c)},[c]),(0,i.useEffect)(()=>{let e=e=>{k({type:"ABORT",reason:e})};r.A.onSessionPause(e);let t=window.innerHeight,a=window.innerWidth,n=()=>{let e=Math.abs(window.innerHeight-t),i=Math.abs(window.innerWidth-a),r=window.innerHeight!==t,o=window.innerWidth!==a,s={handler:(0,v.q)(),deviceType:I?.deviceType??"unknown",isAuthenticated:I?.isAuthenticated??"unknown",platform:N.userAgent.platform??"unknown"};((0,x.GV)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}}),r&&(0,x.uI)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,x.uI)("webapp.PwtLogger.resizeWidthDelta",i,{sampleRate:1,tags:s}),window.removeEventListener("resize",n),(I?.deviceType!=="phone"||(o||!r||!(e<=150))&&(r||o))&&(I?.deviceType!=="desktop"||r||o))?k({type:"ABORT",reason:"windowResized"}):(0,x.GV)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:r,widthChanged:o}})};return window.addEventListener("resize",n),()=>{let t=R();S("handling unmount",t),"TIMING"===t.status&&E(),r.A.removePauseListener(e),window.removeEventListener("resize",n)}},[]),"TIMING"!==M.status||!M.constraintMap[P])return{state:M,context:null};let{startTime:O,metricConfig:L}=M;return{state:M,context:{abort:e=>k({type:"ABORT",reason:e}),addAnnotation:e=>k({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,a)=>k({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:a}}),addSubspan:(e,t,a,n={},i={},r=null)=>k({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:a,annotations:n,binaryAnnotations:i,parentId:r}}),getId:()=>O,getMetricId:()=>L.metricId,markConstraintComplete:e=>k({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:f.A?f.A.now():0}}),removeConstraint:e=>k({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>k({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:L.constraints.includes(z)?e=>k({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},a={},n=null)=>k({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}}),stopSubspan:(e,t={},a={},n=null)=>k({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:a,parentId:n}})}}})({...t,annotateExperiments:w,navigationInfo:{navigationType:m,clientNavigation:c}});return s=!!(a=(0,d.Y)()),(0,i.useEffect)(()=>{if(s){let e=a?.getMetricId(),t=e?(0,o.u5)(e):null;(0,l.vV)("nested_pwt_surface",{action:t})}},[s]),(0,I.jsx)(d.n,{value:y,children:e})}},589914(e,t,a){a.d(t,{Y:()=>i,n:()=>n});let{Provider:n,getMaybe:i}=(0,a(767216).A)("pwtSurfaceContext")},899738(e,t,a){a.d(t,{A:()=>r});var n=a(657140),i=a(244408);function r(){return(0,n.use)(i.A)}},931464(e,t,a){a.d(t,{A:()=>r});var n=a(657140),i=a(495618);function r(){return(0,n.use)(i.A)}},672804(e,t,a){a.d(t,{Eb:()=>m,G2:()=>g,VO:()=>w});var n=a(107639),i=a(214749),r=a(329456);let o="BING",s="GOOGLE",l="YAHOO",d="YANDEX",c="RAKUTEN",u="NAVER",_="AMP_CACHE",p="DUCKDUCKGO",h=[s,o,l,d,c,u,_,p];function m(e){return h.includes(function(e){let{hostname:t}=(0,r.A)(e,!0);if(t&&e){if(t.includes("google.")||e.includes("android-app://com.google.android.googlequicksearchbox"))return s;else if(t.includes("bing."))return o;else if(t.includes("yahoo."))return l;else if(t.includes("yandex."))return d;else if(t.includes("rakuten."))return c;else if(t.includes("naver."))return u;else if(t.includes("duckduckgo."))return p;else if(t.includes(".cdn.ampproject.org"))return _}return""}(e))}function g(e){return e||"u">typeof document&&document.referrer||""}let f=e=>"/"!==e[e.length-1]?`${e}/`:e,b=e=>{let t=f(e),a=(0,n.L6)({url:t});return(0,n.dM)(a)?"PIN":(0,n.iK)(a)?"BOARD":(0,i.A)(a)?"PROFILE":(0,n.j9)(a)?"TODAY":(0,n.wd)(a)?"IDEA":(0,n.mX)(a)?"SHOPPING":"UNKNOWN"},w=({country:e,language:t,isBot:a,hostname:n,pathname:i})=>({domain:n,country:e,language:t,currentUrl:i,pageType:b(i),referrer:document.referrer,isBot:a,links:(({selector:e,skipExternal:t})=>{let a=Array.from(document.querySelectorAll(e)),n={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},i=new Set;return a.forEach(e=>{let a=e.getAttribute("href");if(!a||a.startsWith("#")||t&&a.startsWith("http")&&!a.includes(window.location.hostname))return;let r=f(a);if(i.has(r))return;i.add(r);let o=b(r);"PIN"===o?n.pin.push(r):"BOARD"===o?n.board.push(r):"PROFILE"===o?n.user.push(r):"TODAY"===o?n.today.push(r):"IDEA"===o?n.idea.push(r):"SHOPPING"===o&&n.shopping.push(r)}),n})({selector:"a[href]",skipExternal:!0})})},222961(e,t,a){a.d(t,{A:()=>f});var n=a(335831),i=a(657140),r=a(278461),o=a(129625),s=a(47998),l=a(100564),d=a(218781),c=a(939099),u=a(321791),_=a(489272),p=a(540254),h=a(141982),m=a(135656);function g({boardData:e,refreshBoardData:t}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/save/board/BoardPageContainer/BoardPageContainer.tsx")},[]);let a=e?.id,o=(0,u.oW)()(a??"")||null,{search:s,state:g}=(0,r.zy)();(0,p.A)();let f=g?.newBoard,b=(0,c.bh)(e?.sensitivity),w=f&&!b&&e?.should_show_more_ideas?_.a.jumpstartBoard:null,y=(0,d.A)(s);return(0,m.jsx)(l.A,{measureGridVisuallyComplete:!0,surface:"board",children:(0,m.jsx)(h.A,{board:o??e,initialModalType:w,refreshBoardData:t,showPulsar:!!y.showPulsar})})}function f({boardData:e,refreshBoardData:t}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageAuthDesktop","/app/www/BoardPage/BoardPageAuthDesktop.tsx")},[]);let a=(0,s.A)(),{username:l}=(0,r.g)(),d=a.isAuth&&a.username===l?3069:3070,{logContextEvent:c}=(0,o.o)();return(0,i.useEffect)(()=>{e&&c({aux_data:{board_id:e.id,board_pin_count:e.pin_count},component:178,event_type:13,view_type:5,view_parameter:d})},[e,c,d]),(0,m.jsx)(g,{boardData:e,refreshBoardData:t})}},462300(e,t,a){a.d(t,{A:()=>_});var n=a(335831),i=a(657140),r=a(836737),o=a(396901),s=a(135656);let l=new r.rk(1),d=new r.K5([l]),c=new r.K5([d]);function u(){return(0,s.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(181deg, rgba(0, 0, 0, 0.50) 0.8%, rgba(0, 0, 0, 0.20) 50.98%, rgba(0, 0, 0, 0.50) 99.19%)"}},height:"100%",left:!0,position:"absolute",width:"100%",zIndex:d})}function _({board:e}){(0,i.useEffect)(()=>{(0,n.A)("MobileBoardHeaderImage","/app/www/board/Header/MobileBoardHeaderImage/MobileBoardHeaderImage.tsx")},[]);let t=(0,o.A)(),{featured_board_metadata:a,name:d}=e,{board_subtitle:_}=a||{},p=e.header?.large_image_url||"";return(0,s.jsx)(r.az,{"data-test-id":"board-header-image-container",marginBottom:0,marginEnd:-2,marginStart:-2,width:"calc(100% + 16px",children:(0,s.jsxs)(r.n1,{height:250,width:"100%",children:[(0,s.jsx)(u,{}),(0,s.jsx)(r.az,{height:"100%",left:!0,position:"absolute",width:"100%",zIndex:l,children:(0,s.jsx)(r._V,{alt:t.bt("图板标题图片", "Board Header Image", "board.header.mobileBoardHeaderImage", undefined, true),fit:"cover",naturalHeight:312,naturalWidth:472,role:"presentation",src:p})}),(0,s.jsx)(r.az,{display:"flex",height:"100%",paddingX:4,paddingY:3,position:"relative",zIndex:c,children:(0,s.jsxs)(r.so,{dataTestId:"board-name-container",direction:"column",justifyContent:"end",children:[_&&(0,s.jsx)(r.az,{marginBottom:2,children:(0,s.jsx)(r.KJ,{color:"light",weight:"bold",children:_})}),(0,s.jsx)(r._Y,{accessibilityLevel:1,color:"light",size:"600",children:d})]})})]})})}},676334(e,t,a){a.d(t,{U:()=>l,o:()=>s});var n=a(657140),i=a(767216),r=a(135656);let{Provider:o,get:s}=(0,i.A)("Session");function l({children:e}){let[t,a]=(0,n.useState)(void 0),i=(0,n.useMemo)(()=>({unauthBoardInvite:t,setUnauthBoardInvite:a}),[t]);return(0,r.jsx)(o,{value:i,children:e})}},682800(e,t,a){a.d(t,{$3:()=>e$,Ay:()=>eU,Xl:()=>eL});var n=a(335831),i=a(657140),r=a(924660),o=a(278461),s=a(836737),l=a(221718),d=a(129625),c=a(15176),u=a(746743),_=a(339589),p=a(904078),h=a(388364),m=a(740685),g=a(396901),f=a(259628),b=a(812404),w=a(973586),y=a(128353),A=a(536059),v=a(100564),x=a(931464),I=a(376195),j=a(827154),S=a(167284),P=a(508765),z=a(220527),E=a(424120),T=a(835122),C=a(699415),B=a(488265),R=a(906494),k=a(218781),N=a(491149),M=a(119795),O=a(911499),L=a(33732),$=a(538346),U=a(936143),G=a(146905),V=a(135656);let D="BoardPageSkeletonLoader__",H=()=>((0,i.useEffect)(()=>{(0,n.A)("BoardPageSkeletonLoader","/app/www/board/duplo/BoardPageSkeletonLoader.tsx")},[]),(0,V.jsxs)(i.Fragment,{children:[(0,V.jsx)($.A,{unsafeCSS:[{name:`${D}board_title`,width:280,height:51},{name:`${D}profile_pic`,width:51,height:51}].map(({name:e,width:t,height:a})=>(0,G.A)({name:e,width:t,height:a})).join("")}),(0,V.jsxs)(s.az,{paddingX:2,paddingY:3,children:[(0,V.jsxs)(s.az,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:6,children:[(0,V.jsx)(s.az,{children:(0,V.jsx)("div",{className:`${D}board_title`})}),(0,V.jsx)(s.az,{children:(0,V.jsx)("div",{className:`${D}profile_pic`})})]}),(0,V.jsx)(U.A,{})]})]}));var F=a(229707),K=a(233944),W=a(14143),Y=a(923957),J=a(47998),q=a(464260),X=a(410899),Q=a(321571),Z=a(892804);let ee=e=>{let t=(0,g.A)(),{user:a,invitedByUser:n,inviterFirstName:i}=e;return(0,V.jsxs)(s.az,{alignItems:"center",borderColor:"decorative",borderWidth:"sm",direction:"row",display:"flex",marginBottom:3,marginEnd:-1,marginStart:-1,paddingX:4,paddingY:4,rounding:500,width:"100%",children:[(0,V.jsx)(s.az,{borderColor:"decorative",borderWidth:"lg",dangerouslySetInlineStyle:{__style:{borderColor:"#ffffff",zIndex:-1}},marginTop:-3,rounding:"circle",children:(0,V.jsx)(s.az,{height:34,width:34,children:(0,V.jsx)(Y.eu,{color:a?.avatar_color_index,name:a?a.username:"",src:a?a.image_medium_url??"":""})})}),(0,V.jsx)(s.az,{borderColor:"decorative",borderWidth:"lg",dangerouslySetInlineStyle:{__style:{borderColor:"#ffffff",zIndex:-2}},marginStart:-3,marginTop:3,rounding:"circle",children:(0,V.jsx)(s.az,{height:34,width:34,children:(0,V.jsx)(Y.eu,{color:n?.avatar_color_index,name:n?n.username:"",src:n?n.image_medium_url??"":""})})}),(0,V.jsxs)(s.az,{marginStart:4,children:[(0,V.jsx)(s.KJ,{weight:"bold",children:t.bt("你已参与此图板！", "You're in!", "Text showing that a user has accepted the board invite and is now a part of the board", undefined, true)}),(0,V.jsx)(s.KJ,{children:(0,X.vQ)(t.bt("开始和{{ invitedByUserName }}合作此图板", "Start collaborating with {{ invitedByUserName }} on this board", " - ", undefined, true),{invitedByUserName:i})})]})]})};function et({boardId:e,inviteCode:t,inviterFirstName:a,invitedByUser:r,isSeamlessLanding:o,onAccept:s,user:l}){(0,i.useEffect)(()=>{(0,n.A)("GroupBoardAcceptBanner","/app/www/board/duplo/GroupBoardAcceptBanner.tsx")},[]);let{showToast:d}=(0,R.CG)(),c=(0,g.A)(),[u,_]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{s&&Q.A.create("BoardInviteResource",{board_id:e,invited_user_id:l&&l.id,invite_code:t}).callGet().then(()=>{let e=s();e&&e.then(()=>{_(!0),o&&(0,Z.GV)("mweb.social.group_board.seamless.accepted")}).catch(e=>{d(({hideToast:t})=>(0,V.jsx)(h.A,{onHide:t,text:e.message||c.bt("哎呀！出了点问题...", "Oops! Something went wrong…", "Error during board page accepting", undefined, true),type:"error"}))})}).catch(e=>{d(({hideToast:t})=>(0,V.jsx)(h.A,{onHide:t,text:e.message||c.bt("哎呀！出了点问题...", "Oops! Something went wrong…", "Error during board page accepting", undefined, true),type:"error"}))})},[]),u?(0,V.jsx)(ee,{user:l,inviterFirstName:a,invitedByUser:r}):null}let ea=e=>!!(0,k.A)(e.search).accept_invite;var en=a(676334),ei=a(73049),er=a(532668),eo=a(604050),es=a(157210),el=a(472262),ed=a(710289),ec=a(212277),eu=a(246093),e_=a(420619);function ep({inviteCreationDatetime:e,invitedByUser:t,inviterFirstName:a,onAccept:n,onDismiss:i,loginModal:r,isMwebUnauthBoardInviteLanding:l,setShowLoginModal:d,showLoginModal:c}){let u=(0,g.A)(),_=(0,q.A)(),p=(0,o.zy)(),{showToast:h}=(0,R.CG)(),m=`/${t?.username||""}`,f=(0,eo.A)(),b=(0,N.qJ)(),w=f({fn:({event:e})=>{e.stopPropagation&&e.stopPropagation(),i()},modalHeader:(0,er.b9)({firstName:a,i18n:u}),nextLocation:(0,er.zh)(p)}),y=f({fn:({event:e})=>{e.stopPropagation&&e.stopPropagation(),n(),b||c||l||h(({hideToast:e})=>(0,V.jsx)(Y.y8,{duration:4e3,onHide:e,text:u.bt("你已加入！收藏 Pin 图，与合作用户一起制定计划，还有更多乐趣！", "You're in! Save Pins, plan with collaborators, and more!", "GroupBoardInviteBanner.handleAcceptButtonClick.acceptInviteToastForAuthUser", undefined, true)}))},modalHeader:(0,er.b9)({firstName:a,i18n:u}),nextLocation:(0,er.zh)(p)});return(0,V.jsxs)(s.az,{alignItems:"start",color:"default",display:"flex",elevation:"shadowFloating",marginBottom:2,marginTop:2,maxWidth:400,padding:6,rounding:600,children:[b&&c&&r,(0,V.jsx)(s.az,{marginEnd:2,children:(0,V.jsx)(Y.Z7,{collaborators:[{name:a,src:(t instanceof ei.A?t.image_large_url:t?.image_medium_url)||void 0,color:t instanceof ei.A?t.avatar_color_index:void 0}],href:m,role:"link",size:"md"})}),(0,V.jsxs)(s.az,{marginBottom:0,children:[(0,V.jsx)(s.KJ,{color:"default",weight:"normal",children:(0,X.vQ)(u.bt("{{ name }} 邀请你在此 {{age}} 图板上进行合作", "{{ name }} invited you to collaborate on this board {{age}}", "mweb.board.inviteCard.inviteCopy", undefined, true),{name:(0,V.jsx)(s.KJ,{inline:!0,weight:"bold",children:(0,V.jsx)(s.N_,{display:"inlineBlock",href:m,tapStyle:"none",underline:"hover",children:t?.full_name||""})}),age:(0,V.jsx)(s.KJ,{color:"subtle",inline:!0,children:e&&_(e,!0)})})}),(0,V.jsxs)(s.so,{alignItems:"stretch",justifyContent:"start",children:[(0,V.jsx)(s.az,{display:"inlineBlock",marginEnd:2,marginTop:2,children:(0,V.jsx)(s.$n,{color:"secondary",fullWidth:!0,onClick:w,size:"lg",text:u.bt("拒绝", "Decline", "decline board collaborator invite or request", undefined, true)})}),(0,V.jsx)(s.az,{display:"inlineBlock",marginTop:2,children:(0,V.jsx)(s.$n,{color:"primary",fullWidth:!0,onClick:b&&d&&r?()=>d(!0):y,size:"lg",text:u.bt("接受", "Accept", "accept board invite", undefined, true)})})]})]})]})}function eh({boardId:e}){let t=(0,o.zy)(),{inviter_first_name:n,board_collab_inviter:r,board_url:l,invite_code:d,sender:c,inviter_user_id:u}=(0,k.A)(t.search),[_,p]=(0,i.useState)(!!(n&&l)),[h,m]=(0,i.useState)(!1),f=(0,o.Zp)(),b=(0,g.A)(),w=u??c,y=(0,N.qJ)(),{setUnauthBoardInvite:A}=(0,en.o)(),v=(0,e_.A)(),x=v?.invite?.sender,I=y&&!!x&&d&&r,j=n||x?.first_name||"",S=(0,i.lazy)(()=>Promise.all([a.e("91796"),a.e("18324"),a.e("62632")]).then(a.bind(a,849146)));if((I||!y&&d&&r&&u)&&!_&&p(!0),!_)return null;let P=(0,X.vQ)(b.bt("登录以接受 {{ firstName }} 的图板邀请", "Log in to accept {{ firstName }}'s board invite", "GroupBoardInviteBanner.login.firstName", undefined, true),{firstName:j}).join(""),z=(0,V.jsxs)(s.az,{height:"100%",width:"100%",children:[(0,V.jsx)(s.Wd,{zIndex:new s.rk(10001),children:(0,V.jsx)(s.az,{alignItems:"center",display:"flex",height:"100%",paddingY:12,position:"fixed",width:"100%",children:(0,V.jsx)(S,{container:"limited_login",customLoginTagline:P,customSignupTagline:P,handleCloseButtonClick:()=>m(!1),nextUrlParam:`${t.pathname}${t.search}&accept_invite=True`,showCloseIcon:!0,signupFlow:{type:"login"},signupSource:"boardInvite"})})}),(0,V.jsx)(s.az,{alignItems:"center",color:"washDark",display:"flex",height:"100%",left:!0,opacity:70,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1e4)})]});return y?(0,V.jsx)(ep,{invitedByUser:x,inviterFirstName:j,loginModal:z,onAccept:()=>m(!0),onDismiss:()=>p(!1),setShowLoginModal:m,showLoginModal:h}):(0,V.jsx)(ep,{invitedByUser:x,inviterFirstName:j,isMwebUnauthBoardInviteLanding:!0,onAccept:async()=>{let a=`/invited/${t.search}&board_id=${e}&inviter_first_name=${x?.first_name||""}`;A({inviterId:w,boardId:e,hasAcceptedInvite:!1}),f(a)},onDismiss:()=>p(!1)})}function em({boardId:e,boardImageRep:t,boardName:a}){let n=(0,o.zy)(),l=(0,r.wA)(),d=(0,J.A)(),c=d.isAuth?d.id:void 0,{invite_code:u,seamless:_}=(0,k.A)(n.search),p=(0,ed.b)({board:e,invited_user:c??""}),h=(0,eu.DF)()(c??""),m=(0,K.A)(),f=(0,N.qJ)(),b=(0,g.A)(),{showToast:w}=(0,R.CG)(),y=(0,i.useRef)(!1),[A,v]=(0,i.useState)(!1);(0,S.A)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}});let x=(0,r.d4)(({invites:e})=>e[p]?.created_at||void 0),I=(0,P.A)({name:"BoardInviteResource",options:{field_set_key:"boardEdit",board_id:e,invite_code:u,invited_user_id:c}}),j=(0,r.d4)(t=>{let a=(0,ec.A)(t)[e];return a?t.invites[a]:void 0}),z=(0,r.d4)(({users:e,invites:t})=>Object.keys(t).reduce((a,n)=>{let i=t[n];return i&&(a[n]=e[i.invited_by_user]),a},{})[p]),{unauthBoardInvite:E,setUnauthBoardInvite:T}=(0,en.o)(),{boardId:C,inviterId:B,hasAcceptedInvite:O}=E||{},L=C&&B&&!O,$=C&&B&&O;if((0,M.A)(()=>{L&&h&&(async()=>{y.current=!0;try{await l((0,el.sw)(e,h,m)),T({boardId:e,inviterId:B||"",hasAcceptedInvite:!0}),await I.refresh(),w(({hideToast:e})=>(0,V.jsx)(Y.y8,{duration:5e3,onHide:e,text:(0,V.jsx)(s.KJ,{children:(0,X.vQ)(b.bt("你现在可以在 {{boardName}}进行合作了！", "You can now collaborate on {{boardName}}!", "mweb_group_board_invite_banner.acceptInviteToast", undefined, true),{boardName:(0,V.jsx)(s.KJ,{inline:!0,weight:"bold",children:a})})}),thumbnail:{image:(0,V.jsx)(s._V,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:t})}}))}catch(e){w(({hideToast:t})=>(0,V.jsx)(Y.y8,{onHide:t,text:(0,W.A)(e,"message")??"",type:"error"}))}finally{y.current=!1}})()}),!j||!z||!h||j&&$)return null;let U=z.first_name,G=()=>(v(!0),l((0,el.sw)(e,h,m)));return ea(n)?(f&&w(({hideToast:e})=>(0,V.jsx)(Y.y8,{duration:5e3,onHide:e,text:b.bt("你已加入！收藏 Pin 图，与合作用户一起制定计划，还有更多乐趣！", "You're in! Save Pins, plan with collaborators, and more!", "GroupBoardInviteBanner.handleAcceptButtonClick.acceptInviteToastForAuthUser", undefined, true)})),(0,V.jsx)(et,{boardId:e,inviteCode:u,invitedByUser:z,inviterFirstName:U||"",isSeamlessLanding:!!_,onAccept:G,user:h})):!y.current&&!A&&!!j&&(0,V.jsx)(ep,{inviteCreationDatetime:x,invitedByUser:z,inviterFirstName:U||"",onAccept:G,onDismiss:()=>l((0,es.i0)(e,c??"",m))})}let eg=({isAuthenticated:e,boardId:t,boardImageRep:a,boardName:r})=>((0,i.useEffect)(()=>{(0,n.A)("GroupBoardInviteBanner","/app/www/board/duplo/GroupBoardInviteBanner.tsx")},[]),e)?(0,V.jsx)(em,{boardId:t,boardImageRep:a,boardName:r}):(0,V.jsx)(eh,{boardId:t});var ef=a(925097),eb=a(473478);function ew({handleGoBack:e,hideSensitivityScreen:t,sensitivityScreenAuxData:a}){(0,i.useEffect)(()=>{(0,n.A)("SensitivityScreen","/app/www/board/duplo/SensitivityScreen.tsx")},[]);let r=(0,g.A)(),o=(0,K.A)();return(0,i.useEffect)(()=>{o({component:13860,event_type:13,view_type:5,aux_data:a})},[o]),(0,V.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.8)",paddingTop:260}},display:"flex",height:"100%",justifyContent:"center",position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1),children:(0,V.jsxs)(s.so,{alignItems:"center",direction:"column",gap:{row:0,column:8},maxWidth:500,children:[(0,V.jsx)(s._Y,{align:"center",color:"light",children:r.bt("此图板可能包含敏感内容", "This board may contain sensitive content", "board.sensitivityScreen.heading", undefined, true)}),(0,V.jsxs)(s.so,{gap:{row:6,column:0},children:[(0,V.jsx)(s.$n,{color:"primary",onClick:e,size:"lg",text:r.bt("返回", "Go back", "board.sensitivityScreen.backButton", undefined, true)}),(0,V.jsx)(s.$n,{color:"tertiary",onClick:t,size:"lg",text:r.bt("仍然查看", "View anyway", "board.sensitivityScreen.viewButton", undefined, true)})]}),(0,V.jsx)(s.az,{padding:4,children:(0,V.jsx)(s.KJ,{align:"center",color:"inverse",overflow:"normal",size:"200",children:(0,X.vQ)(r.bt("如果你看到任何违反我们 {{communityGuidelines}} 的内容，请通过点击任意 Pin 图底部的“...”按钮向我们举报", "If you see anything that violates our {{communityGuidelines}}, please report it to us by clicking the \"...\" button at the bottom of any Pin", "board.sensitivityScreen.text", undefined, true),{communityGuidelines:(0,V.jsx)(s.N_,{href:"https://policy.pinterest.com/en/community-guidelines",target:"blank",children:(0,V.jsx)(s.KJ,{color:"inverse",inline:!0,size:"200",underline:!0,children:r.bt("社区准则", "Community Guidelines", "board.sensitivityScreen.communityGuidelines", undefined, true)})})})})})]})})}var ey=a(651727),eA=a(652489),ev=a(462300),ex=a(877784),eI=a(25204),ej=a(834480),eS=a(485960),eP=a(577366),ez=a(83325),eE=a(872782),eT=a(644094);function eC(e,t,a){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let eB=(0,i.lazy)(()=>Promise.all([a.e("91480"),a.e("31099")]).then(a.bind(a,302923))),eR=(0,i.lazy)(()=>a.e("40750").then(a.bind(a,36475))),ek=({boardId:e,children:t,hasFixedHeader:a,viewParameter:n})=>(0,V.jsx)(ej.I,{children:(0,V.jsx)(O.A,{objectIdStr:e,viewParameter:n,viewType:5,children:(0,V.jsx)(C.A,{objectId:e,view:5,viewParameter:n,children:(0,V.jsx)(y.default,{dataLayoutShiftBoundaryId:"BoardPageContainer",hasFixedHeader:a,children:t})})})}),eN=({board:e,blockedByMe:t,children:a,experience:n,isAuthenticated:_,isBoardPreviewMode:p,isSeoBot:h,location:f,setBoardPreviewMode:w,stickyHeaderRef:y,username:v})=>{let x=(0,o.Zp)(),I=(0,b.J)(),j=(0,g.A)(),S=(0,eo.A)(),[P,T]=(0,i.useState)(!1),[C,R]=(0,i.useState)(!1),{logContextEvent:O}=(0,d.o)(),$=(0,B.A)(),U=(0,r.wA)(),{canUseNativeApp:G}=(0,r.d4)(({session:e})=>e),{id:D,name:H,access:F,owner:K,sensitivity:W,privacy:Y,pin_count:J,section_count:q,sensitivity_screen:X,collaborated_by_me:Q,image_cover_url:ee,collaborator_permissions_setting:et}=e,en=(0,N.qJ)(),ei=(0,N.M)(),er=(0,N.wI)(),el=(0,eb.A)(!!Q),ed={board_id:D,reason:X?.reason||""},{slug:ec}=(0,o.g)(),{isDirect:eu}=(0,A.A)(),{previous:e_,forward:ep}=(0,m.qD)(),eh=0===e_.length&&0===ep.length;(0,M.A)(()=>{I&&eh&&eu&&!_&&(en?(0,Z.GV)("unauth.entry_channel.direct.landing_page.board_page.dweb",{sampleRate:1}):(0,Z.GV)("unauth.entry_channel.direct.landing_page.board_page.mweb",{sampleRate:1}))}),(0,M.A)(()=>{_||((e,t)=>{let[a]=(0,E.y1)().getItem(l.o8)??[];if(!(a&&a.path===t.pathname)&&!t.state?.isFromNavFooterPage){let a=e.cover_pin,n=a?.pin_id,i=e.cover_images,r=a&&a.image_signature||null,o=i&&i["222x"]||null;(0,eS.kh)(t.pathname,r,n,o,"board")}})(e,f)}),(0,c.A)({pageUniqueKey:D,containerPage:"board_page"});let em=()=>{S({fn:e=>{e&&e.stopPropagation&&e.stopPropagation(),R(!0),$({action:"click",item:"main-share-button"})}})()};(0,i.useEffect)(()=>{"t"===(0,k.A)(f.search).open_share&&em()},[]),(0,i.useEffect)(()=>(_&&U((0,ez.bP)()),()=>{_&&U((0,ez.iZ)())}),[U,_]);let ej=(F||[]).includes("write"),eE=(0,ef.A)(K?.id),eC=(0,eI.bh)(W),eN=el||eE,eM="secret"===Y,eO=!_&&!h,eL=!eN&&!eO,{hasApplicableLawForCountry:e$}=(0,eP.Ay)(),eU=en&&eO,eG=eN||eL||e$,eV=!en&&(_||!G||eO),eD=!!eG&&eU,eH=(0,i.useRef)(null),[eF,eK]=(0,i.useState)(!1);(0,M.A)(()=>{O({aux_data:{board_id:D,board_pin_count:J??0,board_section_count:q??0},component:178,event_type:13,view_parameter:eE?3069:3070,view_type:5})});let[eW,eY]=(0,i.useState)(!eE&&!el&&!!X?.show_warning),eJ=eE?3069:3070,eq=!en&&!eM,eX=!eq&&!eU&&!eM,{featured_board_metadata:eQ}=e,{has_expanded_sections:eZ}=eQ||{},e0=!!eZ&&eE&&!!w,e1=e.header?.large_image_url||null,e2=_&&!ej;return(0,V.jsxs)(ek,{boardId:D,hasFixedHeader:eV,viewParameter:eJ,children:[n&&(0,V.jsx)(u.b5,{placementId:1000251}),(0,V.jsx)(u.Vj,{customFooterHeight:eE||el?72:0,experience:n}),(0,V.jsx)(u.aR,{experience:n}),(0,V.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:eW?{filter:"blur(20px)"}:{}},children:[en&&!eO&&(0,V.jsx)(s.az,{paddingX:2,children:(0,V.jsx)(eT.default,{color:"default",fallbackUrl:`/${v}/`,padding:3,size:"lg"})}),eV&&(0,V.jsx)(eA.A,{blockedByMe:t,board:e,canEdit:ej,isBoardPreviewMode:p,isOwnerOrCollaborator:eN,isSensitive:eC,isSeoBot:h,onShowAbout:()=>{},openSendBoardModal:em,setBoardPreviewMode:w,shareButtonRef:eH,shouldUseFallbackUrl:ea(f),showFollowOption:e2,showOverflowMenuMobile:!!eG,showReportOption:eL,showShareButtonMobile:eq,showShareOptionInOverflowMenu:eX,showSwitchPreviewMode:e0,slug:ec,stickyHeaderRef:y,username:v,viewParameter:eJ}),(ei||er)&&!!e1&&(0,V.jsx)(ev.A,{board:e}),(0,V.jsx)(s.so,{justifyContent:"center",children:(0,V.jsx)(eg,{boardId:D,boardImageRep:ee??"",boardName:H??"",isAuthenticated:_})}),(_||eO)&&(0,V.jsxs)(i.Fragment,{children:[(0,V.jsx)(z.A,{children:(0,V.jsx)(eB,{component:13216,element:72,hideContactsSuggestions:!_,isOpen:C,objectId:String(D),objectType:2,onDismiss:e=>{e&&e.stopPropagation&&e.stopPropagation(),R(!1)},sendShareSurface:5,viewParameter:eJ,viewType:5})}),P&&(0,V.jsx)(ex.A,{boardCollabPermissionsSetting:eE&&et,isOpen:P,objectId:D,objectType:2,onDismiss:()=>T(!1)})]}),(0,V.jsx)(ey.A,{blockedByMe:t,board:e,getUnauthDesktopBoardActions:()=>(0,V.jsxs)(s.so,{gap:2,children:[(0,V.jsxs)(s.az,{ref:eH,alignContent:"center",alignItems:"center","data-test-id":"share-board-button",direction:"row",display:"flex",justifyContent:"center",marginBottom:2,children:[(0,V.jsx)(s.K0,{accessibilityLabel:j.bt("分享", "Share", "BoardHeader.SendBoardButton", undefined, true),bgColor:e1?"default":"transparent",icon:"share",onClick:()=>{$({action:"click",item:"main-share-button"}),eK(!0)},selected:eF,size:"lg",tooltip:{text:j.bt("分享", "Share", "BoardHeader.SendBoardButton", undefined, true)}}),(0,V.jsx)(u.X$,{anchors:{4020:eH.current},idealDirection:"down",onAnchorTouch:"complete",placementId:1000251,scrollToDismiss:!0}),eF&&(0,V.jsx)(z.A,{children:(0,V.jsx)(eR,{anchor:eH.current,component:13216,objectId:D,objectType:2,onDismiss:()=>eK(!1),sendShareSurface:5,title:j.bt("发送此图板", "Send this board", "Sharesheet.ShareSocialBar", undefined, true),viewType:5})})]}),eD&&(0,V.jsx)(s.az,{children:(0,V.jsx)(L.A,{bgColor:e1?"white":"transparent",board:e,hideShare:!eX,iconSize:"lg",isOwnerOrCollaborator:eN,isSensitive:eC,onShowAbout:()=>{},openSendBoardModal:em,showAboutRecommendationOption:!1,showReportOption:eL,slug:ec,username:v,viewParameter:eJ,viewType:578})})]}),isAuthenticated:_,isBoardPreviewMode:p,isSeoBot:h,setInviteCollaboratorsModalIsOpen:T,viewParameter:eJ,children:a})]}),eW&&(0,V.jsx)(s.az,{marginStart:-2,children:(0,V.jsx)(ew,{handleGoBack:()=>{O({event_type:101,component:13860,element:73,view_type:5,aux_data:ed}),I||x("/",{replace:!0}),x(-1)},hideSensitivityScreen:()=>{U((0,es.oj)(D)),O({event_type:101,component:13860,element:12448,view_type:5,aux_data:ed}),eY(!1)},sensitivityScreenAuxData:ed})})]})};class eM extends i.Component{constructor(...e){super(...e),eC(this,"stickyHeaderRef",(0,i.createRef)()),eC(this,"logScrollEvent",(0,T.A)(()=>{let e=this.props.board?this.props.board.id:0;this.props.logContextEvent({event_type:110,view_type:5,view_parameter:3070,aux_data:{unauth_page_board_id:e}})},300))}componentDidMount(){let{board:e,dispatch:t,isAuthenticated:a,isViewerBoardOwner:n,isViewerCollaborator:i,isSeoBot:r,location:o}=this.props;if(e){let a="other";n?a="own":i&&(a="collaborator"),t((0,_.xL)([1000251],r,{board_id:e.id,board_ownership:a}))}(0,w.A)(),a?(0,k.A)(o.search).seamless&&(0,Z.GV)("mweb.social.group_board.seamless.land"):((0,eS.Dx)({key:l.Vb,lastVisitedPage:o.pathname}),window.addEventListener("scroll",this.logScrollEvent)),this.stickyHeaderRef&&this.stickyHeaderRef.current&&f.A.addObstruction("top",this.stickyHeaderRef.current)}componentWillUnmount(){this.props.isAuthenticated||window.removeEventListener("scroll",this.logScrollEvent),this.stickyHeaderRef&&this.stickyHeaderRef.current&&f.A.removeObstruction("top",this.stickyHeaderRef.current)}render(){let{board:e,children:t,experience:a,i18n:n,isAuthenticated:i,isBoardPreviewMode:r,isSeoBot:o,location:l,setBoardPreviewMode:d,user:c}=this.props;return e&&c?(0,V.jsx)(eN,{blockedByMe:c.blocked_by_me,board:e,experience:a,isAuthenticated:i,isBoardPreviewMode:r,isSeoBot:o,location:l,setBoardPreviewMode:d,stickyHeaderRef:this.stickyHeaderRef,username:c.username??"",children:t}):(0,V.jsx)(s.az,{column:12,paddingY:2,children:i?(0,V.jsx)(s.y$,{accessibilityLabel:n.bt("正在加载页面", "Loading feed", " - ", undefined, true),show:!0}):(0,V.jsx)(H,{})})}}let eO=({boardId:e})=>{let{slug:t,username:a}=(0,o.g)();return(0,S.A)({name:"BoardInvitesResource",options:{...e?{board_id:e}:{username:a,slug:t},status_filters:"new,contact_request_not_approved",sort:"viewer_first",include_inactive:!0}}),null};function eL({isBoardPreviewMode:e,children:t,setIsBoardPreviewMode:a}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]);let s=(0,g.A)(),l=(0,x.A)(),c=(0,o.zy)(),{slug:u,username:_}=(0,o.g)(),h=(0,r.wA)(),{logContextEvent:m}=(0,d.o)(),{isAuthenticated:f,isBot:b}=(0,I._8)(),w=`/${_}/${(0,F.E)(u)}/`,y=(0,r.d4)(e=>(0,eE.A)(e)[w]),A=y?.owner,j=(0,p.A)({id:1000251}),S=(0,ef.A)(y?.owner?.id),P=(0,eb.A)(!!y?.collaborated_by_me);return(0,V.jsxs)(i.Fragment,{children:[y&&(y.access||[]).includes("write")&&(0,V.jsx)(eO,{boardId:y.id}),(0,V.jsx)(v.A,{measureGridVisuallyComplete:!0,surface:"board",children:(0,V.jsx)(eM,{board:y,dispatch:h,experience:j,i18n:s,isAuthenticated:f,isBoardPreviewMode:e,isSeoBot:b,isViewerBoardOwner:S,isViewerCollaborator:P,location:c,logContextEvent:m,pwtStaticContext:l,setBoardPreviewMode:a,user:A,children:t})})]})}function e$({children:e}){(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]);let t=(0,g.A)(),{isAuthenticated:a,isBot:r}=(0,I._8)(),s=(0,o.zy)(),{slug:l,username:d}=(0,o.g)(),{showToast:c}=(0,R.CG)(),{error:u}=(0,P.A)({name:"BoardResource",options:(({username:e,field_set_key:t,slug:a,getPageMetadata:n,invite_code:i})=>({field_set_key:t||"profile_grid_item",is_mobile_fork:!0,username:e,slug:a,get_page_metadata:n,invite_code:i}))({username:decodeURIComponent(d),slug:(0,F.k)(l)})}),_=u&&a&&{pathname:s.pathname.match(/\/[^\/]*\//g),search:s.search},p=(0,P.A)(r?null:{name:"UserResource",options:{field_set_key:"profile",username:decodeURIComponent(d)}}),m=!r&&(0,j.A)(p);return!a&&u?(0,V.jsx)(o.C5,{replace:!0,state:{showError:!0},to:"/ideas/"}):_?(c(({hideToast:e})=>(0,V.jsx)(h.A,{duration:7e3,onHide:e,text:a?t.bt("我们无法找到该用户的这一图板，但是你可以查看他们的其他图板！", "We couldn't find that Pinner's board but here are some of their other boards!", "Error text when a user attempts to go to a board that doesn't exist or they don't have access to", undefined, true):t.bt("我们无法找到该图板。请登录并再试一次！", "We can't find that board. Please log in and give it another try!", "Error text when a user attempts to go to a board that doesn't exist or they don't have access to", undefined, true),type:"error"})),(0,V.jsx)(o.C5,{replace:!0,to:_})):m?(0,V.jsx)(o.C5,{replace:!0,to:m}):e}function eU({children:e}){return(0,i.useEffect)(()=>{(0,n.A)("BoardPageContainer","/app/www/board/duplo/BoardPageContainer.tsx")},[]),(0,V.jsx)(e$,{children:(0,V.jsx)(eL,{children:e})})}},73049(e,t,a){a.d(t,{A:()=>m});var n=a(335831),i=a(657140),r=a(924660),o=a(836737),s=a(923957),l=a(396901),d=a(410899),c=a(232225),u=a(435029),_=a(792041),p=a(727365),h=a(135656);function m({isSelf:e,showVerified:t=!1,user:a={},onFollowChange:m}){(0,i.useEffect)(()=>{(0,n.A)("User","/app/www/common/User/User.tsx")},[]);let[g,f]=(0,i.useState)(a.explicitly_followed_by_me||!1),[b,w]=(0,i.useState)(!1),y=(0,r.wA)(),A=(0,l.A)(),v=()=>{w(!1),y((0,_.X2)(a.id)),f(!1),m&&m(a,!1)},{verified_identity:x,full_name:I,is_verified_merchant:j,is_private_profile:S,explicitly_followed_by_me:P,username:z}=a,E=x?.verified,T=a.image_medium_url||a.image_small_url;return(0,h.jsxs)(o.az,{alignItems:"center","aria-label":A.bt("用户", "User", "FollowersModal.User.card", undefined, true),direction:"row",display:"flex",marginEnd:-1,marginStart:-1,paddingY:1,role:"group",children:[b&&(0,h.jsx)(u.A,{firstName:I??"",handleUnfollowUser:v,onDismiss:()=>{w(!1)}}),(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{wordBreak:"break-word"}},flex:"grow",paddingX:1,children:(0,h.jsx)(o.$A,{href:`/${z}/`,children:(0,h.jsxs)(o.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,h.jsx)(o.az,{width:50,children:(0,h.jsx)(s.eu,{accessibilityLabel:A.bt("用户头像", "User profile picture", "FollowersModal.User.profilePicture", undefined, true),color:a?.avatar_color_index,name:(0,d.vQ)(A.bt("{{ fullName }} 的头像", "Avatar for {{ fullName }}", "avatar.name", undefined, true),{fullName:I}).join(" "),size:"fit",src:T??""})}),(0,h.jsx)(o._Y,{accessibilityLevel:3,size:"300",children:(0,h.jsx)(o.KJ,{inline:!0,lineClamp:3,size:"300",weight:"bold",children:t&&(j||E)?(0,h.jsx)(p.A,{badgeSize:"sm",badgeSpacing:2,fullName:I??"",isVerifiedIdentity:E,isVerifiedMerchant:j}):I})}),S&&(0,h.jsx)(o.az,{children:(0,h.jsx)(o.In,{accessibilityLabel:A.bt("私密图标", "private icon", "privateProfileHeaderAuthDesktop.privateIcon", undefined, true),icon:"lock",inline:!0})})]})})}),(0,h.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},paddingX:1,children:(!S||P)&&(0,h.jsx)(c.A,{followEventType:45,id:a.id,isFollowed:g,isUserMe:!!e,onFollow:e=>{y((0,_.e6)(e)),f(!0),m&&m(a,!0)},onUnfollow:()=>{S?w(!0):v()},pinKey:null,textType:"FollowUnfollow",unfollowEventType:46,viewType:4})})]})}},435029(e,t,a){a.d(t,{A:()=>u});var n=a(335831),i=a(657140),r=a(836737),o=a(389598),s=a(396901),l=a(410899),d=a(491149),c=a(135656);function u({onDismiss:e,firstName:t,handleUnfollowUser:a}){(0,i.useEffect)(()=>{(0,n.A)("UnfollowUser","/app/www/profile/UserProfileHeader/ModalContents/UnfollowUser.tsx")},[]);let u=(0,s.A)(),_=(0,d.qJ)(),p=(0,l.vQ)(u.bt("取消关注 {{ firstName }}？", "Unfollow {{ firstName }}?", "unfollowUser.modal.header", undefined, true),{firstName:t}).join(""),h=u.bt("你将无法再查看他们的个人资料、Pin 图、图板、粉丝或关注列表。他们不会收到通知。", "You will no longer be able to view their profile, Pins, boards, followers or following lists. They will not be notified.", "unFollowUser.modal.description", undefined, true),m=u.bt("取消", "Cancel", "unfollowUser.modal.cancel", undefined, true),g=u.bt("取消关注", "Unfollow", "unfollowUser.modal.button.unfollow", undefined, true);return _?(0,c.jsx)(o.Ay,{accessibilityModalLabel:p,footer:(0,c.jsxs)(r.az,{alignItems:"center",display:"flex",justifyContent:"end",marginEnd:-1,marginStart:-1,children:[(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{fullWidth:!0,onClick:e,size:"lg",text:m})}),(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{color:"primary",fullWidth:!0,onClick:a,size:"lg",text:g})})]}),heading:p,onDismiss:e,role:"alertdialog",size:"md",children:(0,c.jsx)(r.az,{"data-test-id":"unfollow-text",marginEnd:6,marginStart:6,children:(0,c.jsx)(r.KJ,{children:h})})}):(0,c.jsxs)(o.Ay,{accessibilityModalLabel:p,mobileHideCloseIcon:!0,onDismiss:e,type:"unFollow_button",children:[(0,c.jsx)(r.az,{alignItems:"center",display:"flex",paddingX:3,paddingY:5,children:(0,c.jsx)(r._Y,{accessibilityLevel:1,size:"600",children:p})}),(0,c.jsx)(r.az,{marginBottom:4,marginEnd:4,marginStart:4,children:(0,c.jsx)(r.KJ,{children:h})}),(0,c.jsxs)(r.az,{alignItems:"center",display:"flex",justifyContent:"center",marginBottom:8,children:[(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{fullWidth:!0,onClick:e,size:"md",text:m})}),(0,c.jsx)(r.az,{padding:1,children:(0,c.jsx)(r.$n,{color:"primary",fullWidth:!0,onClick:a,size:"md",text:g})})]})]})}},682412(e,t,a){function n(e,t){return{type:"SET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e,renderError:t}}}function i(e){return{type:"UNSET_LOCATION_TO_ERROR_MAP_ENTRY",payload:{pathname:e}}}a.d(t,{C:()=>i,V:()=>n})},792041(e,t,a){a.d(t,{AD:()=>_,X2:()=>d,e6:()=>s,sN:()=>l,x2:()=>c});var n=a(321571),i=a(301704),r=a(890850);function o(e,t,a,i){return n.A.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:a})}function s(e,t=null,a,n){return i=>{o(e,t,a,n).callCreate().catch(()=>i((0,r.pV)(e,!1))),i((0,r.pV)(e,!0))}}function l(e,t=null,a,n){return async i=>{i((0,r.pV)(e,!0)),await o(e,t,a,n).callCreate().catch(t=>{throw i((0,r.pV)(e,!1)),t})}}function d(e,t=null,a){return n=>{o(e,t,a).callDelete().catch(()=>n((0,r.pV)(e,!0))),n((0,r.pV)(e,!1))}}function c(e,t=null,a){return async n=>{n((0,r.pV)(e,!1)),await o(e,t,a).callDelete().catch(t=>{throw n((0,r.pV)(e,!0)),t})}}let u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),_=e=>t=>{e.length>0&&((0,i.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(u(e,!1))),t(u(e,!0)))}},540254(e,t,a){a.d(t,{A:()=>l});var n=a(657140),i=a(924660),r=a(278461),o=a(973586),s=a(682412);function l(){let e=(0,i.wA)(),t=(0,r.Zp)(),{pathname:a}=(0,r.zy)(),l=(0,i.d4)(({ui:e})=>e.mainComponent.locationToErrorMap);(0,n.useEffect)(()=>{(0,o.A)();let n=a.split("/"),i=`/${n[1]}/`;l[a]&&(e((0,s.V)(i,l[a])),t(i,{replace:!0}))},[])}},420619(e,t,a){a.d(t,{A:()=>d});var n=a(657140),i=a(278461),r=a(107639),o=a(214749),s=a(508765),l=a(108302);let d=e=>{let t=(0,l.d)(),a=(0,i.zy)(),[d]=(0,n.useState)(a),c=a.pathname===d.pathname&&a.search===d.search&&((0,r.ZX)(a)&&((0,r.mg)(a)&&"pin"||(0,r.iK)(a)&&"board"||(0,o.A)(a)&&"profile")||null)||null,[u,_]=(0,n.useState)(null),{isLoaded:p,data:h}=(0,s.A)(!e&&t&&c?{name:"InviteCodeMetadataResource",options:{invite_code:t}}:null);return(0,n.useEffect)(()=>{p&&h&&_(h??null)},[p,h]),t&&c?{invite:u,pageType:c}:null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/75993.zh_CN-9afb310d9de16f68.mjs.map