(self.modernJsonp=self.modernJsonp||[]).push([["37726"],{616635(e,t,n){n.d(t,{E:()=>i});let i={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"}},929962(e,t,n){n.d(t,{A:()=>a,i:()=>i});let i=()=>"u">typeof navigator&&"getInstalledRelatedApps"in navigator;async function a(){if(!i())return[];try{return await navigator.getInstalledRelatedApps()}catch(e){return[]}}},659630(e,t,n){n.d(t,{E8:()=>w,Jf:()=>v,L9:()=>i,MI:()=>r,N:()=>p,N9:()=>d,Xt:()=>u,d4:()=>_,d9:()=>c,i:()=>l,iF:()=>g,j1:()=>h,je:()=>a,k3:()=>m,kx:()=>o,rT:()=>f,sz:()=>y}),n(661373);let i=5e3,a=5,l="Pin page",s=["Uploaded by user"],o=(e,t)=>!!t&&!e,r=e=>!!e&&5!==e,d=e=>["email","messages","deep_linking"].includes(e),u=e=>!!e&&"gif"===e,_=({embedSrc:e,embedSubtype:t,embedType:n})=>!!e&&!u(n)&&"pinstory"!==t,c=({link:e,mobileLink:t,trackedLink:n,utmLink:i})=>!t&&!i&&!n&&!e,p=e=>{if(!e)return!1;try{let{hostname:t}=new URL(e),n=t.toLowerCase();return"pin.it"===n||n.endsWith(".pin.it")}catch{return/\bpin\.it\b/i.test(e)}},g=({link:e,mobileLink:t,origImageUrl:n,trackedLink:i,utmLink:a})=>t||a||i||e||n||"",h=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function m(e){for(let t of s)if(e===t)return!1;return!0}function v(e){if(!e)return!1;let{id:t,videos:n}=e;if(t&&n?.id&&n.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:i}=n.video_list;if(e&&b(e)||t&&b(t)||i&&b(i))return!0}let i=e.story_pin_data?.pages?.[0]?.blocks;if(i){for(let e of i)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function b(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function w(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function f({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!w(t)}let y=e=>"button"in e&&1===e.button},959484(e,t,n){n.d(t,{FW:()=>_,qX:()=>c,UK:()=>s,xe:()=>d,ps:()=>r,rD:()=>u,Gw:()=>p,n2:()=>o});let i=/\s\s+/g;var a=n(331474);let l=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_title"])),s=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,o=(e,t)=>e?e.trim().length>t?(0,a.A)(e.trim(),t).trim():e.trim():"",r=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:l})=>{let s=l||e,r=o(t,200);return r||n||i||(a&&s?s:null)},d=e=>{let{richSummaryDisplayName:t}=e,n=e.pinJoinVisualAnnotation||[],l=e.pinJoinAnnotationsWithLinks||{},s=e.richMetadataDescription||"",o=e.closeupUnifiedDescription||"",r=n.map(e=>(l||{})[e]||{name:e,url:""}),d="",u=(t||"").toLocaleLowerCase().trim(),_=s.toLocaleLowerCase().trim(),c=o.toLocaleLowerCase().trim();return o&&o.length>3&&c!==u?d=o:s&&s.length>3&&_!==u&&(d=s),d&&(d=(0,a.A)(d,496).replace(i," ").trim()),{description:d,annotationsWithLinks:r}},u=({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:s,pinJoinVisualAnnotation:d,seoNoindexReason:u,shouldUseSimplifiedTitle:_=!1})=>l.has(u??"")?d?.[0]??" ":_?o(t,200)||d?.[0]||"":r({pinTitle:e,gridTitle:t,richSummaryDisplayName:n,richMetadataTitle:i,storyPinDataId:a,storyPinDataMetadataPinTitle:s})||d?.[0]||e,_=e=>`/pin/${e}/`,c=(e,t)=>{let n=`Pinterest video from ${t}: `.concat(e);return""===t?e:n},p=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:_(e)},775912(e,t,n){n.d(t,{$7:()=>g,Po:()=>m,Rc:()=>h,iG:()=>p,xD:()=>c});var i=n(657140),a=n(767216),l=n(315718),s=n(119795),o=n(507120),r=n(892804),d=n(135656);let{Provider:u,getMaybe:_}=(0,a.A)("PwaContext"),c=({children:e,initialContext:t})=>{let[n,a]=(0,i.useState)(null),o=t||{pwaType:"unknown",twaType:null},_=o.pwaType;(0,s.A)(()=>{let e=(0,l.uy)(window)||"unknown";a(e),_!==e&&(0,r.GV)("pwa.type_mismatch",{sampleRate:1,tags:{serverPwaType:_,clientPwaType:e,conflict:"unknown"!==_&&"unknown"!==e}})});let c="unknown"===_&&n?n:_,{twaType:p}=o,g=(0,i.useMemo)(()=>({pwaType:c,twaType:p}),[c,p]);return(0,d.jsx)(u,{value:g,children:e})},p=()=>{let e=_();return e?.pwaType??"unknown"},g=()=>{let e=_();return e?.twaType??null},h=()=>"android-twa"===p(),m=()=>{let e=p(),t=(0,o.A)();return"unknown"===e&&t?null:"windows"===e}},470712(e,t,n){n.d(t,{A:()=>a});var i=n(528989);function a(){let{checkExperiment:e}=(0,i.A)();return()=>e("web_initial_client_fetches_reduction").anyEnabled}},108302(e,t,n){n.d(t,{d:()=>a,y:()=>i});let{Provider:i,getMaybe:a}=(0,n(767216).A)("inviteContext")},558267(e,t,n){n.d(t,{S:()=>l,c:()=>s});var i=n(657140);let a=(0,i.createContext)(null),l=()=>(0,i.use)(a),s=a},733807(e,t,n){n.d(t,{A:()=>p});var i=n(221718),a=n(360447),l=n(490560),s=n(959484),o=n(424120),r=n(60341),d=n(798923);let u=new class{constructor(){this.listeners={}}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}},_=new class{constructor(){this.rules={},this.init()}init(){for(let e of[{category:"dweb_max_free_pin_modal",validate:this.validateImageView.bind(this),action:"SHOW_LOGIN_MODAL"},{category:"dweb_save",validate:this.saveRule.bind(this),action:"SHOW_SAVE_MODAL"},{category:"dweb_scroll_banner_dismiss_rule",validate:this.scrollBanerDismissRule.bind(this),action:"BOTTOM_RIGHT_BANNER_DISMISS"},{category:"dweb_scroll_banner_limit_rule",validate:this.scrollBannerLimitRule.bind(this),action:"BOTTOM_RIGHT_BANNER_LIMIT"},{category:"dweb_scroll_banner_show",validate:this.scrollBannerShowRule.bind(this),action:"BOTTOM_RIGHT_BANNER_SHOW"}])this.addRule(e)}initExperiment(e){this.experiment=e}addRule(e){this.rules[e.category]=this.rules[e.category]??[],this.rules[e.category].push(e)}evaluate(e,t){if(!this.rules[e])return null;for(let n of this.rules[e])if(n.validate(t))return n.action;return null}validateImageView(e){let{clickCount:t}=e,{hasSeenLoginModal:n}=e,{hasDismissedLoginModal:i}=e;return this.experiment?.group==="enabled_relaxation"?t+1>=4&&!n&&!i:t+1>=4&&!n}saveRule(e){return"desktop"===e.deviceType}scrollBanerDismissRule(e){return e.scrollTop<64}scrollBannerLimitRule(e){return e.scrollTop<4e3}scrollBannerShowRule(e){return this.experiment?.group==="enabled_relaxation"?e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3&&!e.hasDismissedLoginModal:e.isInOpenModalExperience||e.isSafari||e?.state?.scrollSessionCount!==3}};var c=n(394461);let p=new class{constructor(){this.init()}init(){u.on("pinView",this.handlePinView.bind(this)),u.on("pinSave",this.handleSavePin.bind(this)),u.on("showDesktopSignupModal",this.showDesktopSignupModal.bind(this)),u.on("hideDesktopSignupModal",this.hideDesktopSignupModal.bind(this)),u.on("onScrollHybridBanner",this.onScrollHybridBanner.bind(this))}initExperiment(e){this.experiment=e("dweb_upsell_manager_mvp_2"),this.experiment&&_.initExperiment(this.experiment)}emitEvent(e,t){u.emit(e,t)}handlePinView(e){let{history:t,linkTarget:n}=e,u=(0,o.y1)().getItem(i.jB)??0;(0,o.y1)().setItem(i.jB,u+1);let p=(0,r.V2)().getItem(a.RR);if("SHOW_LOGIN_MODAL"===_.evaluate("dweb_max_free_pin_modal",{clickCount:u,hasSeenLoginModal:p})){let{onUpsellTriggerCallback:i}=e;i(),(0,d.PM)("dweb.navigational.upsell.show"),(0,r.V2)().setItem(a.RR,"true");let o={pinId:e.pinId,seoUrl:e.seoUrl},u=(0,c.A)((0,s.Gw)(o),{mt:"login"});if("fullPageLoad"===n)(0,l.A)(u,!1);else if("duploClientNav"===n)t.push(u);else{let e=window.open(u,"_blank");e?.focus()}}}handleSavePin(e){if("SHOW_SAVE_MODAL"===_.evaluate("dweb_save",{deviceType:e.deviceType})){let{pinId:t,attributionLabel:n,modalHeadingType:i,showSignupModal:a}=e;a({attributionLabel:"extended_save_out_of_quota"===i?"click_save_button_with_max_unauth_saves":n||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",mobileOptions:{headingType:i},desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save"}},pinId:t})}}showDesktopSignupModal(e){let{displayProps:t,viewType:n,viewParameter:i,trackInteraction:a,trackConversionUpsellForContext:l,logDesktopSignupModalEvent:s,dispatchSignupModalAction:o}=e;o({type:"show",displayProps:t});let{attributionLabel:r,signupFlow:d,reason:u}=t;a({action:"trigger",item:d.type.includes("signup")?"signup-modal":"login-modal"}),l({viewType:n,viewParameter:i,eventType:14688,element:{UPSELL_LOGIN_OR_SIGNUP:13319,ACTION_REQUIRES_LOGIN_OR_SIGNUP:13320,CLICK_LOGIN_OR_SIGNUP:13321}[u]||13322,component:"login"===d.type?14212:14214,upsellReason:r}),s("dispatch_show",{attributionLabel:r,modalType:d.type,reason:u})}hideDesktopSignupModal(e){let{shouldDoSideEffects:t,loginForMore:n,dispatchSignupModalAction:i,logDesktopSignupModalEvent:a}=e,l=e.isEligibilityLoginForMore;t&&n&&l&&n.setVisible(!1),i({type:"dismiss"}),a("dispatch_dismiss",{shouldDoSideEffects:t})}onScrollHybridBanner(e){let{evt:t,isSafari:n,trackConversionUpsell:i,UnauthHybridBannerClassComponent:l,isInOpenModalExperience:s}=e,o=0,d=t&&t.target instanceof Document?t.target:null;if(d&&d.documentElement&&d.documentElement.scrollTop>0?o=d.documentElement.scrollTop:d&&d.body&&d.body.scrollTop>0&&(o=d.body.scrollTop),"BOTTOM_RIGHT_BANNER_DISMISS"===_.evaluate("dweb_scroll_banner_dismiss_rule",{scrollTop:o}))l.state.shouldShowBanner&&!l.state.bannerDismissed&&(i({element:13893,eventType:10243}),l.state.bannerDismissed=!0),l.setShouldShowBanner(!1);else if("BOTTOM_RIGHT_BANNER_LIMIT"===_.evaluate("dweb_scroll_banner_limit_rule",{scrollTop:o})){let e=l.state.shouldShowBanner;l.setState(e=>({shouldShowBanner:"BOTTOM_RIGHT_BANNER_SHOW"===_.evaluate("dweb_scroll_banner_show",{isInOpenModalExperience:s,isSafari:n,state:e}),scrollSessionCount:Math.ceil(o/800)}),()=>{e||!l.state.shouldShowBanner||l.state.bannerViewed||(i({eventType:14688,element:13319,component:14479,upsellReason:"scroll_down"}),l.state.bannerViewed=!0)})}else!(0,r.V2)().getItem(a.RR)&&!s&&n&&t&&t.preventDefault()}}},733469(e,t,n){n.d(t,{A:()=>l,C:()=>a});var i=n(657140);let a=120;function l(e,t=0,n=a){let[s,o]=(0,i.useState)(e?"active":"inactive");return(0,i.useEffect)(()=>{if(e)if(t){let e=setTimeout(()=>o("active"),t);return()=>{clearTimeout(e)}}else o("active");else{let e=setTimeout(()=>o("inactive"),n);return()=>{clearTimeout(e)}}},[e]),s}},849115(e,t,n){n.d(t,{A:()=>r});var i=n(335831),a=n(657140),l=n(836737),s=n(733469),o=n(135656);function r({children:e,fadeInDuration:t=0,fadeOutDuration:n=s.C,visibility:r}){return((0,a.useEffect)(()=>{(0,i.A)("FadeableContainer","/app/www/AuthDesktopPinRep/components/FadeableContainer.tsx")},[]),"none"!==r&&e)?(0,o.jsx)(l.az,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:n?`opacity ${n}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},769714(e,t,n){n.d(t,{Wv:()=>i,fN:()=>l,lD:()=>a,s0:()=>s});let i=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],a=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],l=[...a,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","SearchAdsOnlyModule","ShoppingTool","ProductPinRetrieval"],s=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton"]},743753(e,t,n){n.d(t,{R:()=>a,c:()=>i});let{Provider:i,getMaybe:a}=(0,n(767216).A)("unauthPageWrapperContext")},982463(e,t,n){n.d(t,{A:()=>o});var i=n(335831),a=n(657140),l=n(836737),s=n(135656);function o({children:e,additionalStyles:t={}}){return(0,a.useEffect)(()=>{(0,i.A)("ContentLayer","/app/www/PinRep/ContentLayer.tsx")},[]),(0,s.jsx)(l.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",left:!0,position:"absolute",right:!0,top:!0,children:e})}},242595(e,t,n){n.d(t,{Ac:()=>o,D0:()=>r,WO:()=>_,dG:()=>d,lL:()=>c});var i=n(335831),a=n(657140),l=n(767216),s=n(135656);let o={NONE:"NONE",GROUP:"GROUP",SECRET:"SECRET",ARCHIVED:"ARCHIVED"},r={NONE:0,ARCHIVED:1,GROUP:2,SECRET:3},d={COLORS:"COLORS",CREATED_BY_ME:"CREATED_BY_ME",FAVORITED:"FAVORITED",FAVORITED_AND_CREATED:"FAVORITED_AND_CREATED_BY_ME",INTERESTS:"INTERESTS",NONE:""},{Provider:u,getMaybe:_}=(0,l.A)("ProfileViewContext");function c({children:e}){(0,a.useEffect)(()=>{(0,i.A)("ProfileViewContext","/app/www/ProfileViewContext.tsx")},[]);let[t,n]=(0,a.useState)(),[l,o]=(0,a.useState)(new Map),[r,_]=(0,a.useState)(),[c,p]=(0,a.useState)(),[g,h]=(0,a.useState)(d.NONE),[m,v]=(0,a.useState)("ALL"),[b,w]=(0,a.useState)(0),[f,y]=(0,a.useState)(),S=(0,a.useCallback)((e,t)=>{o(new Map(l.set(e,t)))},[l]),A=(0,a.useMemo)(()=>({boardPinDensity:t,boardSortOrder:l,collagesFilter:m,profileBoardView:r,profilePinDensity:c,profileFollowingSelectedIndex:b,selfProfilePinFilter:g,setBoardPinDensity:n,setSelfProfilePinFilter:h,updateBoardSortOrder:S,selfProfileBoardFilter:f,setCollagesFilter:v,setSelfProfileBoardFilter:y,setProfileBoardView:_,setProfilePinDensity:p,setProfileFollowingSelectedIndex:w}),[t,l,m,r,c,b,g,f,v,S]);return(0,s.jsx)(u,{value:A,children:e})}},321791(e,t,n){n.d(t,{$H:()=>d,MI:()=>o,oW:()=>r});var i=n(924660),a=n(767216),l=n(135656);let{Provider:s,get:o}=(0,a.A)("Boards");function r(){let e=o();return t=>e[t]}function d({children:e}){let t=(0,i.d4)(({boards:e})=>e,i.bN);return(0,l.jsx)(s,{value:t,children:e})}},792534(e,t,n){n.d(t,{A4:()=>R,Ak:()=>m,B0:()=>O,FB:()=>M,K3:()=>p,L4:()=>P,L_:()=>f,N5:()=>d,QQ:()=>T,UA:()=>I,Vo:()=>x,XO:()=>b,Xr:()=>k,Yo:()=>y,Z4:()=>o,ZR:()=>h,dL:()=>w,fm:()=>A,hd:()=>u,k1:()=>v,kR:()=>s,mE:()=>_,mG:()=>L,rS:()=>g,s6:()=>r,t:()=>E,u$:()=>S,yU:()=>c});var i=n(836737),a=n(424908),l=n(169250);let s="right",o=s,r=72,d="VerticalNavContent",u=24,_="lg",c="compress",p=16,g=16,h=392,m=12,v="var(--base-color-grayscale-100)",b="var(--comp-button-color-hover-background-tertiary-default)",w=new i.K5([l.Bf]),f=new i.rk(l.d1-3),y=new i.K5([w,a.Jn]),S=new i.K5([w]),A=S,E=200,P=400,x=400,k=300,R=12,T=24,O="200ms left",I=8,M={menuItemPadding:"12px",anchorOffset:"16px"},L=(e,t="long")=>{let n={label:e.bt("艺术", "Art", "dweb.sidenav.ideas.art", undefined, true),value:"961238559656",slug:"art"},i={label:e.bt("美妆", "Beauty", "dweb.sidenav.ideas.beauty", undefined, true),value:"935541271955",slug:"beauty"},a={label:e.bt("饮食", "Food & Drink", "dweb.sidenav.ideas.food", undefined, true),value:"918530398158",slug:"food-and-drink"},l={label:e.bt("设计", "Design", "dweb.sidenav.ideas.design", undefined, true),value:"902065567321",slug:"design"},s={label:e.bt("女性时尚", "Women's Fashion", "dweb.sidenav.ideas.womensFashion", undefined, true),value:"948967005229",slug:"womens-fashion"},o={label:e.bt("男性时尚", "Men's Fashion", "dweb.sidenav.ideas.mensFashion", undefined, true),value:"924581335376",slug:"mens-fashion"},r={label:e.bt("家居装潢", "Home Decor", "dweb.sidenav.ideas.homeDecor", undefined, true),value:"935249274030",slug:"home-decor"},d={label:e.bt("DIY", "DIY", "dweb.sidenav.ideas.diy", undefined, true),value:"934876475639",slug:"diy-and-crafts"},u={label:e.bt("健身", "Fitness", "dweb.sidenav.ideas.fitness", undefined, true),value:"912503731943",slug:"fitness-and-exercise"},_={label:e.bt("宠物", "Pets", "dweb.sidenav.ideas.pets", undefined, true),value:"941660492982",slug:"animals-and-pets"},c={label:e.bt("名言名句", "Quotes", "dweb.sidenav.ideas.quotes", undefined, true),value:"948192800438",slug:"quotes"},p={label:e.bt("旅行", "Travel", "dweb.sidenav.ideas.travel", undefined, true),value:"908182459161",slug:"travel"},g={label:e.bt("婚礼", "Weddings", "dweb.sidenav.ideas.wedding", undefined, true),value:"903260720461",slug:"weddings"};return"long"===t?[n,_,i,l,a,s,o,r,d,c,p,u,g]:[n,i,a,r,s,o]}},954225(e,t,n){n.d(t,{A:()=>a});var i=n(924660);let a=()=>(0,i.d4)(({session:{canUseNativeApp:e}})=>e)},150629(e,t,n){n.d(t,{e:()=>r,v:()=>o});var i=n(657140),a=n(767216),l=n(135656);let{Provider:s,getMaybe:o}=(0,a.A)("CloseupPreviewContext");function r({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({setData:(e,t)=>n(n=>({...n,[e]:t})),getData:e=>t[e]}),[t]);return(0,l.jsx)(s,{value:a,children:e})}},424908(e,t,n){n.d(t,{$S:()=>a,Jn:()=>l,RV:()=>d,cu:()=>c,h$:()=>u,lb:()=>s,r1:()=>r,vL:()=>_,zi:()=>o});var i=n(836737);let a="full-height-inbox-panel",l=new i.rk(700),s="defaultInboxView",o="newMessageView",r="newMessageSelectRecipientsView",d="invitesRequestsView",u="followInviteEducationView",_=64,c="conversationView"},282395(e,t,n){n.d(t,{AT:()=>x,F0:()=>T,PC:()=>R,hP:()=>E,ik:()=>P,nd:()=>k});var i=n(335831),a=n(657140),l=n(278461),s=n(479123),o=n(47998),r=n(107639),d=n(528989),u=n(376195),_=n(508765),c=n(767482),p=n(218781),g=n(491149),h=n(135656);let m="UnauthDesktopSocialPinLandingPageContext",v="UnauthMobileSocialPinLandingPageContext",b="AthDesktopSocialPinLandingPageContext",w="AuthMobileSocialPinLandingPageContext",f=(0,a.createContext)({hasSeenAuthDesktopLandingToast:!1,hasSeenAuthMobileLandingToast:!1,setHasSeenAuthDesktopLandingToast:()=>{},setHasSeenAuthMobileLandingToast:()=>{},hasDismissedLoginModal:!1,setHasDismissedLoginModal:()=>{},hasDismissedGradientUpsell:!1,setHasDismissedGradientUpsell:()=>{},isGradientUpsellTriggerInView:!1,setIsGradientUpsellTriggerInView:()=>{},pinImageUrl:"",setPinImageUrl:()=>{}}),y=({children:e})=>{let[t,n]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)(!1),[u,_]=(0,a.useState)(!1),[c,p]=(0,a.useState)(""),g=(0,a.useMemo)(()=>({hasSeenAuthMobileLandingToast:t,setHasSeenAuthMobileLandingToast:n,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:l,hasDismissedGradientUpsell:s,setHasDismissedGradientUpsell:o,hasDismissedLoginModal:r,setHasDismissedLoginModal:d,isGradientUpsellTriggerInView:u,setIsGradientUpsellTriggerInView:_,pinImageUrl:c,setPinImageUrl:p}),[t,i,s,o,r,d,u,_,c,p]);return(0,h.jsx)(f,{value:g,children:e})},S=(0,a.createContext)({key:"",data:null}),A=({children:e})=>{let t=(0,l.zy)(),{isSocialBot:n,isBot:i}=(0,u._8)(),y=(0,o.A)(),A=y&&y.isAuth,E=(0,g.qJ)(),P=(0,a.useMemo)(()=>(0,r.mg)(t)&&(0,p.A)(t.search).invite_code||"",[t]),x=(0,a.useMemo)(()=>{if(!((0,r.OH)(t)||(0,r.BG)(t)))return"";let e=(0,p.A)(t.search);if(e.invite_code)return e.invite_code;let n=e.from;if(!n)return"";let i=(0,c.A)(n).split("?")[1]||"";return i&&(0,p.A)(i).invite_code||""},[t]),k=(0,a.useMemo)(()=>{let e=(0,s.B6)({path:"/pin/:id"},t.pathname);return String(e?.params&&"id"in e.params&&e.params.id)||""},[t.pathname]),[R,T]=(0,a.useState)({key:"",data:null}),O=(0,a.useRef)(!1),[I,M]=(0,a.useState)(!1),L=!A&&E,C=!A&&!E,{checkExperiment:D}=(0,d.A)(),{hasDismissedLoginModal:G}=(0,a.use)(f),N=!i&&!n&&C&&P,{inDwebFullPageModalExp:U,dWebFullPageModalExpGroup:B,inDwebSocialModalUpdateExp:V,dWebSocialModalUpdateExpGroup:F,inDwebUnauthRelatedPinsLimitExp:z,unauthDwebRelatedPinsLimitGroup:H,inDwebUnauthSocialPinLandingExp:j,unauthDwebSocialPinLandingGroup:W,inDwebSocialContextExp:$,dwebSocialContextExpGroup:q,inMwebUnauthRelatedPinsLimitExp:K,unauthMwebRelatedPinsLimitGroup:J,inMwebUnauthSocialPinLandingSecondaryUpsellExp:X,unauthMwebSocialPinLandingSecondaryUpsellGroup:Y,inMwebSocialFeatureEducationExp:Q,mwebSocialFeatureEducationExpGroup:Z,inMwebSocialContextExp:ee,mwebSocialContextExpGroup:et,inMwebLoginSignupPageExp:en,unauthMwebLoginSignupPageExpGroup:ei}=(0,a.useMemo)(()=>{let e,t,a,l=!i&&!n&&L&&P&&(e=D("ce_dweb_unauth_splp_blocking",{dangerouslySkipActivation:!0}),t=D("ce_dweb_unauth_splp_blocking_no_delay",{dangerouslySkipActivation:!0}),a=D("ce_dweb_unauth_splp_blocking_3s",{dangerouslySkipActivation:!0}),t.anyEnabled?t:a.anyEnabled?a:e)||{anyEnabled:!1,group:void 0},s=!i&&!n&&L&&P&&D("ce_dweb_unauth_splp_modal_update",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},o=!i&&!n&&L&&P&&D("sg_dweb_unauth_social_pin_landing_page")||{anyEnabled:!1,group:void 0},r=!i&&!n&&L&&P&&D("ce_dweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},d=!i&&!n&&C&&P&&D("ce_mweb_unauth_related_pins_limit",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},u=N&&G&&D("sg_mweb_unauth_social_pin_landing_secondary_upsell")||{anyEnabled:!1,group:void 0},_=!i&&!n&&C&&(x||P)&&D("ce_mweb_unauth_social_feature_education")||{anyEnabled:!1,group:void 0},c=!i&&!n&&C&&(x&&D("ce_mweb_unauth_signup_login_social_context")||P&&D("ce_mweb_unauth_signup_login_social_context",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0},p=!i&&!n&&L&&P&&D("ce_dweb_unauth_signup_login_social_context",{dangerouslySkipActivation:!0})||{anyEnabled:!1,group:void 0},g=!i&&!n&&C&&(x&&D("ce_mweb_unauth_splp_signup_banner")||P&&D("ce_mweb_unauth_splp_signup_banner",{dangerouslySkipActivation:!0}))||{anyEnabled:!1,group:void 0};return{inDwebFullPageModalExp:l.anyEnabled,dWebFullPageModalExpGroup:l.group,inDwebSocialModalUpdateExp:s.anyEnabled,dWebSocialModalUpdateExpGroup:s.group,inDwebUnauthRelatedPinsLimitExp:r.anyEnabled,unauthDwebRelatedPinsLimitGroup:r.group,inDwebUnauthSocialPinLandingExp:o.anyEnabled,unauthDwebSocialPinLandingGroup:o.group,inDwebSocialContextExp:p.anyEnabled,dwebSocialContextExpGroup:p.group,inMwebUnauthRelatedPinsLimitExp:d.anyEnabled,unauthMwebRelatedPinsLimitGroup:d.group,inMwebUnauthSocialPinLandingSecondaryUpsellExp:u.anyEnabled,unauthMwebSocialPinLandingSecondaryUpsellGroup:u.group,inMwebSocialFeatureEducationExp:_.anyEnabled,mwebSocialFeatureEducationExpGroup:_.group,inMwebSocialContextExp:c.anyEnabled,mwebSocialContextExpGroup:c.group,inMwebLoginSignupPageExp:g.anyEnabled,unauthMwebLoginSignupPageExpGroup:g.group,showMwebDefaultModalUpsellOnLand:N}},[i,n,L,C,P,x,D,G,N]),ea=P||x,el="default";"enabled_popover_profile"===W?el="default_with_sender_recent_pins":Q&&(el="default_with_social_feature_education");let es=(0,_.A)(ea?{name:"InviteCodeMetadataResource",options:{invite_code:ea,field_set_key:el}}:null),eo=es.isLoaded?es.data:null;(0,a.useEffect)(()=>{if(eo){let e=eo.sender??null,t=A&&e.id!==y.id&&e?.should_show_messaging&&y.should_show_messaging;if(L&&e){let t=null,n=null;j||F||H||$?(t={inviterAvatarUrl:z?e.image_large_url||e.image_medium_url||"":e.image_medium_url||"",inviterName:e.first_name||e.full_name,expGroup:W,inviterRecentPins:"enabled_popover_profile"===W&&e.recent_pin_images?.["222x"]||[],inviterUsername:"enabled_popover_profile"===W&&e.username||""},F&&(t.socialModalUpdateExpGroup=F),H&&(t.limitedRelatedPinsExpGroup=H),q&&!e.is_private_profile&&(t.dwebSocialContextExpGroup=q)):U?n={inDwebFullPageModalExp:U,isFullPageModalDismissed:I,setIsFullPageModalDismissed:M}:t=[5,9,12,16].includes(eo.invite_channel)?null:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name},T({key:m,data:{inviter:e,popoverData:t,modalData:n}})}else if(C&&e){let t=N||J;if(t||en||Q||ee){let n={inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,showDefaultUpsell:!!t};X&&(n.secondaryExpGroup=Y),J&&(n.limitedRelatedPinsExpGroup=J),et&&!e.is_private_profile&&(n.mwebSocialContextExpGroup=et),Q&&!e.is_private_profile&&(n.socialFeatureEducationExpGroup=Z),en&&(n.loginSignupPageExpGroup=ei),T({key:v,data:{upsellData:n}}),O.current=!0}}else t&&!E?T({key:w,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:y.id||""},pin:{pinId:k}}}}):t&&E&&T({key:b,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:y.id||""},pin:{pinId:k}}}})}else{let e=(0,r.OH)(t)||(0,r.BG)(t);O.current&&e||(T({key:"",data:null}),O.current=!1)}},[eo,A,E,k,y,U,B,V,F,z,H,j,C,W,L,$,q,K,J,X,Y,Q,Z,ee,et,en,ei,I,N,t]);let er=(0,a.useMemo)(()=>R,[R]);return(0,h.jsx)(S,{value:er,children:e})},E=({children:e})=>((0,a.useEffect)(()=>{(0,i.A)("SocialPinLandingPageContext","/app/www/lib/SocialPinLandingPageContext.tsx")},[]),(0,h.jsx)(y,{children:(0,h.jsx)(A,{children:e})})),P=()=>{let e=(0,a.use)(S);return e.key===m?e:null},x=()=>{let e=(0,a.use)(S);return e.key===v?e:null},k=()=>{let e=(0,a.use)(S);return e.key===w?e:null},R=()=>{let e=(0,a.use)(S);return e.key===b?e:null},T=()=>(0,a.use)(f)},764553(e,t,n){n.d(t,{$m:()=>u,YV:()=>d,Z0:()=>_});var i=n(221718),a=n(360447),l=n(421752),s=n(424120),o=n(60341);let r=14*l.Wm,d=(e,t)=>{let n,d,u,_=(n=Date.now(),u=Number((d=(0,s.y1)()).getItem(i.P0)??null),{currentTime:n,firstUpsellTime:Number(d.getItem(i.K7)??null),lastUpsellTime:u,showedAppUpsellCurrentSession:!!(0,o.V2)().getItem(a.Ae)});return e?function(e,t,n){let{currentTime:a,firstUpsellTime:l,lastUpsellTime:o,showedAppUpsellCurrentSession:d}=e;return(n=n||r,!l||a<l+t)?!d:a-o>n&&((0,s.y1)().removeItem(i.K7),!0)}(_,l.Wm):function(e,t){let{currentTime:n,lastUpsellTime:i}=e;return t=t||r,!i||n-i>t}(_,t)},u=({isBot:e,platform:t,userAgent:n})=>{try{let i;return!e&&"android"===t&&7>parseFloat((i=n.toLowerCase().match(/android\s([0-9\.]*)/i))?i[1]:void 0)}catch(e){return!1}},_=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},309555(e,t,n){n.d(t,{a:()=>o,h:()=>s});var i=n(657140),a=n(221718),l=n(424120);let s=e=>{let t=(0,l.y1)();e?t.setItem(a.EX,1):t.removeItem(a.EX)},o=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t(!0)},[]),e&&((0,l.y1)().getItem(a.EX)??!1)}},190794(e,t,n){n.d(t,{A:()=>r,u:()=>o});var i=n(657140),a=n(924660),l=n(496620),s=n(39535);let o=2,r=()=>{let e=(0,a.wA)(),t=(0,l.xR)(),n=Array.isArray(t)&&t.length>0?t.map(e=>({id:e.id,imageUrl:e.imageUrl,nodeId:null})):[],r=n.map(e=>e.id).join(","),d=(0,i.useMemo)(()=>n,[r]),u=t=>{e((0,s.vK)(t.map(e=>({id:e.id,imageUrl:e.imageUrl,ts:Date.now()}))))},_=()=>d.length<o;return{pins:d,save:e=>{_()&&u(d.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>{u(d.filter(({id:t})=>t!==e))},isSaved:e=>d.some(({id:t})=>t===e),clear:()=>{u([])},canSaveMore:_}}},469111(e,t,n){n.d(t,{A:()=>s});var i=n(278461),a=n(470712),l=n(508765);function s(e){let{username:t}=(0,i.g)(),n=(0,a.A)()()?e||!t:e||null==t;return(0,l.A)(n?null:{name:"UserResource",options:{username:t,field_set_key:"profile"}})}},840151(e,t,n){n.d(t,{Y:()=>o,Z:()=>r});var i=n(657140),a=n(767216),l=n(135656);let{Provider:s,getMaybe:o}=(0,a.A)("RepinContext");function r({children:e}){let[t,n]=(0,i.useState)(Object.freeze({})),a=(0,i.useMemo)(()=>({getSavedPinId:e=>t[e],isSaved:e=>!!t[e],save:(e,t)=>n(n=>({...n,[e]:t})),unsave:e=>n(t=>({...t,[e]:null}))}),[t]);return(0,l.jsx)(s,{value:a,children:e})}},89401(e,t,n){n.d(t,{A:()=>_});var i=n(335831),a=n(657140),l=n(836737),s=n(731634),o=n(396901),r=n(220527),d=n(135656);let u=(0,a.lazy)(()=>Promise.all([n.e("71454"),n.e("28015")]).then(n.bind(n,909247)));function _(e){(0,a.useEffect)(()=>{(0,i.A)("SendObjectLoader","/app/www/sending/SendObjectLoader.tsx")},[]);let t=(0,o.A)();return(0,d.jsx)(s.A,{name:"SafeSuspense_SendObjectLoader_SendObjectWrapper",children:(0,d.jsx)(r.A,{fallback:(0,d.jsx)(l.az,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,width:"100%",children:(0,d.jsx)(l.y$,{accessibilityLabel:t.bt("正在上传共享 UI", "Loading sharing", "Accessibility label for loading sharing UI", undefined, true),show:!0})}),children:(0,d.jsx)(u,{...e})})})}},749731(e,t,n){n.d(t,{A:()=>l});var i=n(657140),a=n(892804);function l(e){let t=(0,i.useRef)({kind:"NotOver"}),n=(0,i.useCallback)(()=>{"NotOver"===t.current.kind&&(t.current={kind:"OverButNotClicked",mousedOverAt:Date.now()})},[]),l=(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.N9)("entrypointRouter.timeOnLinkUntilMouseOut",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.GV)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"MouseOut"}})),t.current={kind:"NotOver"}},[e]);return{onClick:(0,i.useCallback)(()=>{"OverButNotClicked"===t.current.kind&&((0,a.N9)("entrypointRouter.timeOnLinkUntilClick",Date.now()-t.current.mousedOverAt,{sampleRate:.1,tags:{key:e}}),(0,a.GV)("entrypointRouter.mouseOverResult",{sampleRate:.1,tags:{key:e,outcome:"Click"}}),t.current={kind:"OverAndHasClicked"})},[e]),onMouseEnter:n,onMouseLeave:l}}},522572(e,t,n){function i({children:e,metricName:t}){let n;return n&&n.serverRenderTimings&&!n.serverRenderTimings[t]&&(n.serverRenderTimings[t]=Date.now()),e}n.d(t,{A:()=>i}),(0,n(4940).q6)()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/37726.zh_CN-fb686486a53af3ed.mjs.map